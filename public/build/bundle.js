var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function h(){return u(" ")}function f(){return u("")}function p(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t){return""===t?null:+t}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function y(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function v(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function E(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let x,k;function T(){if(void 0===x){x=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){x=!0}}return x}class A{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var r;this.e||(this.is_svg?this.e=(r=e.nodeName,document.createElementNS("http://www.w3.org/2000/svg",r)):this.e=d(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)s(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(l)}}function S(t){k=t}function N(){const t=function(){if(!k)throw new Error("Function called outside component initialization");return k}();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}(e,n,{cancelable:r});return i.slice().forEach((e=>{e.call(t,a)})),!a.defaultPrevented}return!0}}function C(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const I=[],M=[],z=[],D=[],R=Promise.resolve();let U=!1;function O(t){z.push(t)}function $(t){D.push(t)}const F=new Set;let L=0;function P(){if(0!==L)return;const t=k;do{try{for(;L<I.length;){const t=I[L];L++,S(t),V(t.$$)}}catch(t){throw I.length=0,L=0,t}for(S(null),I.length=0,L=0;M.length;)M.pop()();for(let t=0;t<z.length;t+=1){const e=z[t];F.has(e)||(F.add(e),e())}z.length=0}while(I.length);for(;D.length;)D.pop()();U=!1,F.clear(),S(t)}function V(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const B=new Set;let H;function j(){H={r:0,c:[],p:H}}function Z(){H.r||r(H.c),H=H.p}function q(t,e){t&&t.i&&(B.delete(t),t.i(e))}function G(t,e,n,r){if(t&&t.o){if(B.has(t))return;B.add(t),H.c.push((()=>{B.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const Y="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function K(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function W(t){t&&t.c()}function X(t,n,a,o){const{fragment:s,after_update:l}=t.$$;s&&s.m(n,a),o||O((()=>{const n=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(O)}function Q(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(I.push(t),U||(U=!0,R.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(e,i,a,o,s,c,d,u=[-1]){const h=k;S(e);const f=e.$$={fragment:null,ctx:[],props:c,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(h?h.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||h.$$.root};d&&d(f.root);let p=!1;if(f.ctx=a?a(e,i.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&J(e,t)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!o&&o(f.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);f.fragment&&f.fragment.l(t),t.forEach(l)}else f.fragment&&f.fragment.c();i.intro&&q(e.$$.fragment),X(e,i.target,i.anchor,i.customElement),P()}S(h)}class et{$destroy(){Q(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var nt=Object.defineProperty,rt=Object.defineProperties,it=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,lt=Math.pow,ct=(t,e,n)=>e in t?nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dt=(t,e)=>{for(var n in e||(e={}))ot.call(e,n)&&ct(t,n,e[n]);if(at)for(var n of at(e))st.call(e,n)&&ct(t,n,e[n]);return t},ut=(t,e)=>rt(t,it(e)),ht=(t,e)=>{var n={};for(var r in t)ot.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&at)for(var r of at(t))e.indexOf(r)<0&&st.call(t,r)&&(n[r]=t[r]);return n},ft=(t,e,n)=>new Promise(((r,i)=>{var a=t=>{try{s(n.next(t))}catch(t){i(t)}},o=t=>{try{s(n.throw(t))}catch(t){i(t)}},s=t=>t.done?r(t.value):Promise.resolve(t.value).then(a,o);s((n=n.apply(t,e)).next())}));const pt="p".charCodeAt(0),mt="H".charCodeAt(0),gt="Y".charCodeAt(0),wt="s".charCodeAt(0);let _t;function bt(t){let e=-1;_t||(_t=function(){const t=new Int32Array(256);for(let e=0;e<256;e++){let n=e;for(let t=0;t<8;t++)n=1&n?3988292384^n>>>1:n>>>1;t[e]=n}return t}());for(let n=0;n<t.length;n++)e=_t[255&(e^t[n])]^e>>>8;return-1^e}function yt(t,e,n=!1){const r=new Uint8Array(13);e*=39.3701,r[0]=pt,r[1]=mt,r[2]=gt,r[3]=wt,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=255&e,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const i=bt(r),a=new Uint8Array(4);if(a[0]=i>>>24,a[1]=i>>>16,a[2]=i>>>8,a[3]=255&i,n){const e=function(t){for(let e=t.length-1;e>=4;e--)if(9===t[e-4]&&t[e-3]===pt&&t[e-2]===mt&&t[e-1]===gt&&t[e]===wt)return e-3;return 0}(t);return t.set(r,e),t.set(a,e+13),t}{const e=new Uint8Array(4);e[0]=0,e[1]=0,e[2]=0,e[3]=9;const n=new Uint8Array(54);return n.set(t,0),n.set(e,33),n.set(r,37),n.set(a,50),n}}const vt="[modern-screenshot]",Et="undefined"!=typeof window,xt=Et&&"Worker"in window,kt=Et&&"atob"in window;var Tt;const At=Et?null==(Tt=window.navigator)?void 0:Tt.userAgent:"",St=At.includes("Chrome"),Nt=At.includes("AppleWebKit")&&!St,Ct=At.includes("Firefox"),It=t=>t&&"__CONTEXT__"in t,Mt=t=>"CSSFontFaceRule"===t.constructor.name,zt=t=>"CSSImportRule"===t.constructor.name,Dt=t=>1===t.nodeType,Rt=t=>"object"==typeof t.className,Ut=t=>"image"===t.tagName,Ot=t=>"use"===t.tagName,$t=t=>Dt(t)&&void 0!==t.style&&!Rt(t),Ft=t=>8===t.nodeType,Lt=t=>3===t.nodeType,Pt=t=>"IMG"===t.tagName,Vt=t=>"VIDEO"===t.tagName,Bt=t=>"CANVAS"===t.tagName,Ht=t=>"TEXTAREA"===t.tagName,jt=t=>"INPUT"===t.tagName,Zt=t=>"STYLE"===t.tagName,qt=t=>"SCRIPT"===t.tagName,Gt=t=>"SELECT"===t.tagName,Yt=t=>"SLOT"===t.tagName,Kt=t=>"IFRAME"===t.tagName,Wt=(...t)=>console.warn(vt,...t),Xt=t=>console.time(`${vt} ${t}`),Qt=t=>console.timeEnd(`${vt} ${t}`),Jt=t=>{var e;const n=null==(e=null==t?void 0:t.createElement)?void 0:e.call(t,"canvas");return n&&(n.height=n.width=1),n&&"toDataURL"in n&&Boolean(n.toDataURL("image/webp").includes("image/webp"))},te=t=>t.startsWith("data:");function ee(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(Et&&t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i)||!Et)return t;const n=ne().implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}function ne(t){var e;return null!=(e=t&&Dt(t)?null==t?void 0:t.ownerDocument:t)?e:window.document}const re="http://www.w3.org/2000/svg";function ie(t,e="image/png",n=1){return ft(this,null,(function*(){try{return yield new Promise(((r,i)=>{t.toBlob((t=>{t?r(t):i(new Error("Blob is null"))}),e,n)}))}catch(r){if(kt)return Wt("Failed canvas to blob",{type:e,quality:n},r),function(t){var e,n;const[r,i]=t.split(","),a=null!=(n=null==(e=r.match(/data:(.+);/))?void 0:e[1])?n:void 0,o=window.atob(i),s=o.length,l=new Uint8Array(s);for(let t=0;t<s;t+=1)l[t]=o.charCodeAt(t);return new Blob([l],{type:a})}(t.toDataURL(e,n));throw r}}))}function ae(t,e){return new Promise(((n,r)=>{const i=new FileReader;i.onload=()=>n(i.result),i.onerror=()=>r(i.error),i.onabort=()=>r(new Error(`Failed read blob to ${e}`)),"dataUrl"===e?i.readAsDataURL(t):"arrayBuffer"===e&&i.readAsArrayBuffer(t)}))}const oe=t=>ae(t,"dataUrl"),se=t=>ae(t,"arrayBuffer");function le(t,e){const n=ne(e).createElement("img");return n.decoding="sync",n.loading="eager",n.src=t,n}function ce(t,e){return new Promise((n=>{const{timeout:r,ownerDocument:i,onError:a}=null!=e?e:{},o="string"==typeof t?le(t,ne(i)):t;let s=null,l=null;function c(){n(o),s&&clearTimeout(s),null==l||l()}if(r&&(s=setTimeout(c,r)),Vt(o)){const t=o.currentSrc||o.src;if(!t)return o.poster?ce(o.poster,e).then(n):c();if(o.readyState>=2)return c();const r=c,i=e=>{Wt("Failed video load",t,e),null==a||a(e),c()};l=()=>{o.removeEventListener("loadeddata",r),o.removeEventListener("error",i)},o.addEventListener("loadeddata",r,{once:!0}),o.addEventListener("error",i,{once:!0})}else{const t=Ut(o)?o.href.baseVal:o.currentSrc||o.src;if(!t)return c();const e=()=>ft(this,null,(function*(){if(Pt(o)&&"decode"in o)try{yield o.decode()}catch(e){Wt("Failed to decode image, trying to render anyway",o.dataset.originalSrc||t,e)}c()})),n=e=>{Wt("Failed image load",o.dataset.originalSrc||t,e),c()};if(Pt(o)&&o.complete)return e();l=()=>{o.removeEventListener("load",e),o.removeEventListener("error",n)},o.addEventListener("load",e,{once:!0}),o.addEventListener("error",n,{once:!0})}}))}const de=function(){let t=0;return()=>(t+=1,`u${`0000${(Math.random()*lt(36,4)<<0).toString(36)}`.slice(-4)}${t}`)}();function ue(t){return null==t?void 0:t.split(",").map((t=>t.trim().replace(/"|'/g,"").toLowerCase())).filter(Boolean)}function he(t){return{time:e=>t&&Xt(e),timeEnd:e=>t&&Qt(e),warn:(...e)=>t&&Wt(...e)}}function fe(t){return{cache:t?"no-cache":"force-cache"}}function pe(t,e){return ft(this,null,(function*(){return It(t)?t:function(t,e){return ft(this,null,(function*(){var n,r,i,a,o;const{scale:s=1,workerUrl:l,workerNumber:c=1}=e||{},d=Boolean(null==e?void 0:e.debug),u=null==(n=null==e?void 0:e.features)||n,h=null!=(r=t.ownerDocument)?r:Et?window.document:void 0,f=null!=(a=null==(i=t.ownerDocument)?void 0:i.defaultView)?a:Et?window:void 0,p=new Map,m=ut(dt({width:0,height:0,quality:1,type:"image/png",scale:s,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:d,fetch:dt({requestInit:fe(null==(o=null==e?void 0:e.fetch)?void 0:o.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1},null==e?void 0:e.fetch),fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:c,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1},e),{__CONTEXT__:!0,log:he(d),node:t,ownerDocument:h,ownerWindow:f,dpi:1===s?null:96*s,svgStyleElement:me(h),svgDefsElement:null==h?void 0:h.createElementNS(re,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...new Array(xt&&l&&c?c:0)].map((()=>{try{const t=new Worker(l);return t.onmessage=t=>ft(this,null,(function*(){var e,n,r,i;const{url:a,result:o}=t.data;o?null==(n=null==(e=p.get(a))?void 0:e.resolve)||n.call(e,o):null==(i=null==(r=p.get(a))?void 0:r.reject)||i.call(r,new Error(`Error receiving message from worker: ${a}`))})),t.onmessageerror=t=>{var e,n;const{url:r}=t.data;null==(n=null==(e=p.get(r))?void 0:e.reject)||n.call(e,new Error(`Error receiving message from worker: ${r}`))},t}catch(t){return Wt("Failed to new Worker",t),null}})).filter(Boolean),fontFamilies:new Set,fontCssTexts:new Map,acceptOfImage:`${[Jt(h)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:p,drawImageCount:0,tasks:[],features:u,isEnable:t=>{var e;return"boolean"==typeof u?u:null==(e=u[t])||e}});m.log.time("wait until load"),yield function(t,e){return ft(this,null,(function*(){$t(t)&&(Pt(t)||Vt(t)?yield ce(t,{timeout:e}):yield Promise.all(["img","video"].flatMap((n=>Array.from(t.querySelectorAll(n)).map((t=>ce(t,{timeout:e})))))))}))}(t,m.timeout),m.log.timeEnd("wait until load");const{width:g,height:w}=function(t,e){let{width:n,height:r}=e;if(Dt(t)&&(!n||!r)){const e=t.getBoundingClientRect();n=n||e.width||Number(t.getAttribute("width"))||0,r=r||e.height||Number(t.getAttribute("height"))||0}return{width:n,height:r}}(t,m);return m.width=g,m.height=w,m}))}(t,ut(dt({},e),{autoDestruct:!0}))}))}function me(t){if(!t)return;const e=t.createElement("style"),n=e.ownerDocument.createTextNode("\n.______background-clip--text {\n  background-clip: text;\n  -webkit-background-clip: text;\n}\n");return e.appendChild(n),e}function ge(t,e){return ft(this,null,(function*(){const{log:n,timeout:r,drawImageCount:i,drawImageInterval:a}=e;n.time("image to canvas");const o=yield ce(t,{timeout:r}),{canvas:s,context2d:l}=function(t,e){const{width:n,height:r,scale:i,backgroundColor:a,maximumCanvasSize:o}=e,s=t.createElement("canvas");s.width=Math.floor(n*i),s.height=Math.floor(r*i),s.style.width=`${n}px`,s.style.height=`${r}px`,o&&(s.width>o||s.height>o)&&(s.width>o&&s.height>o?s.width>s.height?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o):s.width>o?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o));const l=s.getContext("2d");return l&&a&&(l.fillStyle=a,l.fillRect(0,0,s.width,s.height)),{canvas:s,context2d:l}}(t.ownerDocument,e),c=()=>{try{null==l||l.drawImage(o,0,0,s.width,s.height)}catch(t){Wt("Failed to drawImage",t)}};if(c(),e.isEnable("fixSvgXmlDecode"))for(let t=0;t<i;t++)yield new Promise((e=>{setTimeout((()=>{c(),e()}),t+a)}));return e.drawImageCount=0,n.timeEnd("image to canvas"),s}))}const we=["width","height","-webkit-text-fill-color"],_e=["stroke","fill"];function be(t,e,n){var r;const{defaultComputedStyles:i,ownerDocument:a}=n,o=t.nodeName.toLowerCase(),s=Rt(t)&&"svg"!==o,l=s?_e.map((e=>[e,t.getAttribute(e)])).filter((([,t])=>null!==t)):[],c=[s&&"svg",o,l.map(((t,e)=>`${t}=${e}`)).join(","),e].filter(Boolean).join(":");if(i.has(c))return i.get(c);let d=n.sandbox;if(!d)try{a&&(d=a.createElement("iframe"),d.id=`__SANDBOX__-${de()}`,d.width="0",d.height="0",d.style.visibility="hidden",d.style.position="fixed",a.body.appendChild(d),null==(r=d.contentWindow)||r.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),n.sandbox=d)}catch(t){Wt("Failed to create iframe sandbox",t)}if(!d)return new Map;const u=d.contentWindow;if(!u)return new Map;const h=u.document;let f,p;s?(f=h.createElementNS(re,"svg"),p=f.ownerDocument.createElementNS(f.namespaceURI,o),l.forEach((([t,e])=>{p.setAttributeNS(null,t,e)})),f.appendChild(p)):f=p=h.createElement(o),p.textContent=" ",h.body.appendChild(f);const m=u.getComputedStyle(p,e),g=new Map;for(let t=m.length,e=0;e<t;e++){const t=m.item(e);we.includes(t)||g.set(t,m.getPropertyValue(t))}return h.body.removeChild(f),i.set(c,g),g}function ye(t,e,n){var r;const i=new Map,a=[],o=new Map;if(n)for(const t of n)s(t);else for(let e=t.length,n=0;n<e;n++){s(t.item(n))}for(let t=a.length,e=0;e<t;e++)null==(r=o.get(a[e]))||r.forEach(((t,e)=>i.set(e,t)));function s(n){const r=t.getPropertyValue(n),s=t.getPropertyPriority(n),l=n.lastIndexOf("-"),c=l>-1?n.substring(0,l):void 0;if(c){let t=o.get(c);t||(t=new Map,o.set(c,t)),t.set(n,[r,s])}e.get(n)===r&&!s||(c?a.push(c):i.set(n,[r,s]))}return i}const ve=[":before",":after"],Ee=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function xe(t){if(t.ownerDocument)try{const e=t.toDataURL();if("data:,"!==e)return le(e,t.ownerDocument)}catch(t){}const e=t.cloneNode(!1),n=t.getContext("2d"),r=e.getContext("2d");try{return n&&r&&r.putImageData(n.getImageData(0,0,t.width,t.height),0,0),e}catch(t){Wt("Failed to clone canvas",t)}return e}function ke(t,e){return Bt(t)?xe(t):Kt(t)?function(t,e){var n;try{if(null!=(n=null==t?void 0:t.contentDocument)&&n.body)return Ce(t.contentDocument.body,e)}catch(t){Wt("Failed to clone iframe",t)}return t.cloneNode(!1)}(t,e):Pt(t)?function(t){const e=t.cloneNode(!1);return t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager"),e}(t):Vt(t)?function(t){return ft(this,null,(function*(){if(t.ownerDocument&&!t.currentSrc&&t.poster)return le(t.poster,t.ownerDocument);const e=t.cloneNode(!1);e.crossOrigin="anonymous",t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc);const n=e.ownerDocument;if(n){let r=!0;if(yield ce(e,{onError:()=>r=!1}),!r)return t.poster?le(t.poster,t.ownerDocument):e;e.currentTime=t.currentTime,yield new Promise((t=>{e.addEventListener("seeked",t,{once:!0})}));const i=n.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;try{const t=i.getContext("2d");t&&t.drawImage(e,0,0,i.width,i.height)}catch(n){return Wt("Failed to clone video",n),t.poster?le(t.poster,t.ownerDocument):e}return xe(i)}return e}))}(t):t.cloneNode(!1)}const Te=new Set(["symbol"]);function Ae(t,e,n){return ft(this,null,(function*(){Dt(e)&&(Zt(e)||qt(e))||n.filter&&!n.filter(e)||(Te.has(t.nodeName)||Te.has(e.nodeName)?n.currentParentNodeStyle=void 0:n.currentParentNodeStyle=n.currentNodeStyle,t.appendChild(yield Ce(e,n)))}))}function Se(t,e,n){return ft(this,null,(function*(){var r,i;for(let a=null!=(i=Dt(t)?null==(r=t.shadowRoot)?void 0:r.firstChild:void 0)?i:t.firstChild;a;a=a.nextSibling)if(!Ft(a))if(Dt(a)&&Yt(a)&&"function"==typeof a.assignedNodes){const t=a.assignedNodes();for(let r=0;r<t.length;r++)yield Ae(e,t[r],n)}else yield Ae(e,a,n)}))}const Ne=/^[\w-:]+$/;function Ce(t,e,n=!1){return ft(this,null,(function*(){var r,i,a,o;const{ownerDocument:s,ownerWindow:l,fontFamilies:c}=e;if(s&&Lt(t))return s.createTextNode(t.data);if(s&&l&&Dt(t)&&($t(t)||Rt(t))){const s=yield ke(t,e);if(e.isEnable("removeAbnormalAttributes")){const t=s.getAttributeNames();for(let e=t.length,n=0;n<e;n++){const e=t[n];Ne.test(e)||s.removeAttribute(e)}}const l=e.currentNodeStyle=function(t,e,n,r){var i,a,o,s;const{ownerWindow:l,includeStyleProperties:c,currentParentNodeStyle:d}=r,u=e.style,h=l.getComputedStyle(t),f=be(t,null,r);null==d||d.forEach(((t,e)=>{f.delete(e)}));const p=ye(h,f,c);return p.delete("transition-property"),p.delete("all"),p.delete("d"),p.delete("content"),n&&(p.delete("margin-top"),p.delete("margin-right"),p.delete("margin-bottom"),p.delete("margin-left"),p.delete("margin-block-start"),p.delete("margin-block-end"),p.delete("margin-inline-start"),p.delete("margin-inline-end"),p.set("box-sizing",["border-box",""])),"text"===(null==(i=p.get("background-clip"))?void 0:i[0])&&e.classList.add("______background-clip--text"),St&&(p.has("font-kerning")||p.set("font-kerning",["normal",""]),("hidden"===(null==(a=p.get("overflow-x"))?void 0:a[0])||"hidden"===(null==(o=p.get("overflow-y"))?void 0:o[0]))&&"ellipsis"===(null==(s=p.get("text-overflow"))?void 0:s[0])&&t.scrollWidth===t.clientWidth&&p.set("text-overflow",["clip",""])),p.forEach((([t,e],n)=>{u.setProperty(n,t,e)})),p}(t,s,n,e);n&&function(t,e){const{backgroundColor:n,width:r,height:i,style:a}=e,o=t.style;if(n&&o.setProperty("background-color",n,"important"),r&&o.setProperty("width",`${r}px`,"important"),i&&o.setProperty("height",`${i}px`,"important"),a)for(const t in a)o[t]=a[t]}(s,e);let d=!1;if(e.isEnable("copyScrollbar")){const e=[null==(r=l.get("overflow-x"))?void 0:r[0],null==(i=l.get("overflow-y"))?void 0:i[1]];d=e.includes("scroll")||(e.includes("auto")||e.includes("overlay"))&&(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)}return function(t,e,n,r){const{ownerWindow:i,svgStyleElement:a,svgStyles:o,currentNodeStyle:s}=r;function l(n){var a;const l=i.getComputedStyle(t,n);let c=l.getPropertyValue("content");if(!c||"none"===c)return;c=c.replace(/(')|(")|(counter\(.+\))/g,"");const d=[de()],u=be(t,n,r);null==s||s.forEach(((t,e)=>{u.delete(e)}));const h=ye(l,u,r.includeStyleProperties);h.delete("content"),h.delete("-webkit-locale"),"text"===(null==(a=h.get("background-clip"))?void 0:a[0])&&e.classList.add("______background-clip--text");const f=[`content: '${c}';`];if(h.forEach((([t,e],n)=>{f.push(`${n}: ${t}${e?" !important":""};`)})),1===f.length)return;try{e.className=[e.className,...d].join(" ")}catch(t){return}const p=f.join("\n  ");let m=o.get(p);m||(m=[],o.set(p,m)),m.push(`.${d[0]}:${n}`)}a&&i&&(ve.forEach(l),n&&Ee.forEach(l))}(t,s,d,e),function(t,e){Ht(t)&&(e.innerHTML=t.value),(Ht(t)||jt(t)||Gt(t))&&e.setAttribute("value",t.value)}(t,s),null==(o=ue(null==(a=l.get("font-family"))?void 0:a[0]))||o.forEach((t=>c.add(t))),Vt(t)||(yield Se(t,s,e)),s}const d=t.cloneNode(!1);return yield Se(t,d,e),d}))}function Ie(t,e){const{url:n,requestType:r="text",responseType:i="text",imageDom:a}=e;let o=n;const{timeout:s,acceptOfImage:l,requests:c,fetchFn:d,fetch:{requestInit:u,bypassingCache:h,placeholderImage:f},workers:p}=t;"image"===r&&(Nt||Ct)&&t.drawImageCount++;let m=c.get(n);if(!m){h&&h instanceof RegExp&&h.test(o)&&(o+=(/\?/.test(o)?"&":"?")+(new Date).getTime());const t=dt({url:o,timeout:s,responseType:i,headers:"image"===r?{accept:l}:void 0},u);m={type:r,resolve:void 0,reject:void 0,response:null},m.response=(()=>ft(this,null,(function*(){if(d&&"image"===r){const t=yield d(n);if(t)return t}return!Nt&&n.startsWith("http")&&p.length?new Promise(((e,r)=>{p[c.size&p.length-1].postMessage(dt({rawUrl:n},t)),m.resolve=e,m.reject=r})):function(t){const e=t,{url:n,timeout:r,responseType:i}=e,a=ht(e,["url","timeout","responseType"]),o=new AbortController,s=r?setTimeout((()=>o.abort()),r):void 0;return fetch(n,dt({signal:o.signal},a)).then((t=>{if(!t.ok)throw new Error("Failed fetch, not 2xx response",{cause:t});return"dataUrl"===i?t.blob().then(oe):t.text()})).finally((()=>clearTimeout(s)))}(t)})))().catch((t=>{if(c.delete(n),"image"===r&&f)return Wt("Failed to fetch image base64, trying to use placeholder image",o),"string"==typeof f?f:f(a);throw t})),c.set(n,m)}return m.response}function Me(t,e,n,r){return ft(this,null,(function*(){if(!ze(t))return t;for(const[i,a]of function(t,e){const n=[];return t.replace(De,((t,r,i)=>(n.push([i,ee(i,e)]),t))),n.filter((([t])=>!te(t)))}(t,e))try{const e=yield Ie(n,{url:a,requestType:r?"image":"text",responseType:"dataUrl"});t=t.replace(Re(i),`$1${e}$3`)}catch(t){Wt("Failed to fetch css data url",i,t)}return t}))}function ze(t){return/url\((['"]?)([^'"]+?)\1\)/.test(t)}const De=/url\((['"]?)([^'"]+?)\1\)/g;function Re(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Ue(t,e){return ft(this,null,(function*(){const{ownerDocument:t,svgStyleElement:n,fontFamilies:r,fontCssTexts:i,tasks:a,font:o}=e;if(t&&n&&r.size)if(o&&o.cssText){const r=Pe(o.cssText,e);n.appendChild(t.createTextNode(`${r}\n`))}else{const o=Array.from(t.styleSheets).filter((t=>{try{return"cssRules"in t&&Boolean(t.cssRules.length)}catch(e){return Wt(`Error while reading CSS rules from ${t.href}`,e),!1}}));yield Promise.all(o.flatMap((t=>Array.from(t.cssRules).map(((n,r)=>ft(this,null,(function*(){if(zt(n)){let i=r+1;const a=n.href;let o="";try{o=yield Ie(e,{url:a,requestType:"text",responseType:"text"})}catch(t){Wt(`Error fetch remote css import from ${a}`,t)}const s=o.replace(De,((t,e,n)=>t.replace(n,ee(n,a))));for(const e of function(t){if(null==t)return[];const e=[];let n=t.replace(Oe,"");for(;;){const t=$e.exec(n);if(!t)break;e.push(t[0])}n=n.replace($e,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=r.exec(n);if(t)i.lastIndex=r.lastIndex;else{if(t=i.exec(n),!t)break;r.lastIndex=i.lastIndex}e.push(t[0])}return e}(s))try{t.insertRule(e,e.startsWith("@import")?i+=1:t.cssRules.length)}catch(t){Wt("Error inserting rule from remote css import",{rule:e,error:t})}}}))))))),o.flatMap((t=>Array.from(t.cssRules))).filter((t=>{var e;return Mt(t)&&ze(t.style.getPropertyValue("src"))&&(null==(e=ue(t.style.getPropertyValue("font-family")))?void 0:e.some((t=>r.has(t))))})).forEach((r=>{const o=r,s=i.get(o.cssText);s?n.appendChild(t.createTextNode(`${s}\n`)):a.push(Me(o.cssText,o.parentStyleSheet?o.parentStyleSheet.href:null,e).then((r=>{r=Pe(r,e),i.set(o.cssText,r),n.appendChild(t.createTextNode(`${r}\n`))})))}))}}))}const Oe=/(\/\*[\s\S]*?\*\/)/gi,$e=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;const Fe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Le=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Pe(t,e){const{font:n}=e,r=n?null==n?void 0:n.preferredFormat:void 0;return r?t.replace(Le,(t=>{for(;;){const[e,,n]=Fe.exec(t)||[];if(!n)return"";if(n===r)return`src: ${e};`}})):t}const Ve=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function Be(t,e){const{tasks:n}=e;Dt(t)&&((Pt(t)||Ut(t))&&n.push(...function(t,e){if(Pt(t)){const n=t.currentSrc||t.src;if(!te(n))return[Ie(e,{url:n,imageDom:t,requestType:"image",responseType:"dataUrl"}).then((e=>{e&&(t.srcset="",t.dataset.originalSrc=n,t.src=e||"")}))];(Nt||Ct)&&e.drawImageCount++}else if(Rt(t)&&!te(t.href.baseVal)){const n=t.href.baseVal;return[Ie(e,{url:n,imageDom:t,requestType:"image",responseType:"dataUrl"}).then((e=>{e&&(t.dataset.originalSrc=n,t.href.baseVal=e||"")}))]}return[]}(t,e)),Ot(t)&&n.push(...function(t,e){var n;const{ownerDocument:r,svgDefsElement:i}=e,a=null!=(n=t.getAttribute("href"))?n:t.getAttribute("xlink:href");if(!a)return[];const[o,s]=a.split("#");if(s){const n=`#${s}`,a=null==r?void 0:r.querySelector(`svg ${n}`);if(o&&t.setAttribute("href",n),null!=i&&i.querySelector(n))return[];if(a)return[Ce(a,e).then((t=>{null!=i&&i.querySelector(n)||null==i||i.appendChild(t)}))];if(o)return[Ie(e,{url:o,responseType:"text"}).then((t=>{null==i||i.insertAdjacentHTML("beforeend",t)}))]}return[]}(t,e))),$t(t)&&n.push(...function(t,e){return Ve.map((n=>{const r=t.getPropertyValue(n);return r&&"none"!==r?((Nt||Ct)&&e.drawImageCount++,Me(r,null,e,!0).then((e=>{!e||r===e||t.setProperty(n,e,t.getPropertyPriority(n))}))):null})).filter(Boolean)}(t.style,e)),t.childNodes.forEach((t=>{Be(t,e)}))}function He(t,e){return ft(this,null,(function*(){const n=yield pe(t,e);if(Dt(n.node)&&Rt(n.node))return n.node;const{ownerDocument:r,log:i,tasks:a,svgStyleElement:o,svgDefsElement:s,svgStyles:l,font:c,progress:d,autoDestruct:u,onCloneNode:h,onEmbedNode:f,onCreateForeignObjectSvg:p}=n;i.time("clone node");const m=yield Ce(n.node,n,!0);if(o&&r){let t="";l.forEach(((e,n)=>{t+=`${e.join(",\n")} {\n  ${n}\n}\n`})),o.appendChild(r.createTextNode(t))}i.timeEnd("clone node"),null==h||h(m),!1!==c&&Dt(m)&&(i.time("embed web font"),yield Ue(0,n),i.timeEnd("embed web font")),i.time("embed node"),Be(m,n);const g=a.length;let w=0;null==d||d(w,g),yield Promise.all([...Array(4)].map((()=>ft(this,null,(function*(){for(;;){const t=a.pop();if(!t)break;try{yield t}catch(t){Wt("Failed to run task",t)}null==d||d(++w,g)}}))))),i.timeEnd("embed node"),null==f||f(m);const _=function(t,e){const{width:n,height:r}=e,i=function(t,e,n){const r=ne(n).createElementNS(re,"svg");return r.setAttributeNS(null,"width",t.toString()),r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"viewBox",`0 0 ${t} ${e}`),r}(n,r,t.ownerDocument),a=i.ownerDocument.createElementNS(i.namespaceURI,"foreignObject");return a.setAttributeNS(null,"x","0%"),a.setAttributeNS(null,"y","0%"),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.append(t),i.appendChild(a),i}(m,n);return s&&_.insertBefore(s,_.children[0]),o&&_.insertBefore(o,_.children[0]),u&&function(t){if(t.ownerDocument=void 0,t.ownerWindow=void 0,t.svgStyleElement=void 0,t.svgDefsElement=void 0,t.svgStyles.clear(),t.defaultComputedStyles.clear(),t.sandbox){try{t.sandbox.remove()}catch(t){}t.sandbox=void 0}t.workers=[],t.fontFamilies.clear(),t.fontCssTexts.clear(),t.requests.clear(),t.tasks=[]}(n),null==p||p(_),_}))}function je(t,e){return ft(this,null,(function*(){var n;const r=yield pe(t,e),i=yield He(r),a=function(t,e){let n=(new XMLSerializer).serializeToString(t);return e&&(n=n.replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`}(i,r.isEnable("removeControlCharacter"));r.autoDestruct||(r.svgStyleElement=me(r.ownerDocument),r.svgDefsElement=null==(n=r.ownerDocument)?void 0:n.createElementNS(re,"defs"),r.svgStyles.clear());const o=le(a,i.ownerDocument);return yield ge(o,r)}))}function Ze(t){let e;if(t){if(!(t instanceof ArrayBuffer))throw Error("Invalid buffer received.");if(this.datas=new DataView(t,0,Ze.HEADER_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"h"!==String.fromCharCode(this.datas.getUint8(2))||"d"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileHeader : MThd prefix not found");if(6!==this.datas.getUint32(4))throw new Error("Invalid MIDIFileHeader : Chunk length must be 6")}else e=new Uint8Array(Ze.HEADER_LENGTH),e[0]=77,e[1]=84,e[2]=104,e[3]=100,e[4]=0,e[5]=0,e[6]=0,e[7]=6,e[8]=0,e[9]=1,e[10]=0,e[11]=1,e[12]=0,e[13]=192,this.datas=new DataView(e.buffer,0,Ze.HEADER_LENGTH)}Ze.HEADER_LENGTH=14,Ze.FRAMES_PER_SECONDS=1,Ze.TICKS_PER_BEAT=2,Ze.prototype.getFormat=function(){const t=this.datas.getUint16(8);if(0!==t&&1!==t&&2!==t)throw new Error("Invalid MIDI file : MIDI format ("+t+"), format can be 0, 1 or 2 only.");return t},Ze.prototype.setFormat=function(t){if(0!==t&&1!==t&&2!==t)throw new Error("Invalid MIDI format given ("+t+"), format can be 0, 1 or 2 only.");this.datas.setUint16(8,t)},Ze.prototype.getTracksCount=function(){return this.datas.getUint16(10)},Ze.prototype.setTracksCount=function(t){return this.datas.setUint16(10,t)},Ze.prototype.getTickResolution=function(t){return 32768&this.datas.getUint16(12)?1e6/(this.getSMPTEFrames()*this.getTicksPerFrame()):(t=t||5e5)/this.getTicksPerBeat()},Ze.prototype.getTimeDivision=function(){return 32768&this.datas.getUint16(12)?Ze.FRAMES_PER_SECONDS:Ze.TICKS_PER_BEAT},Ze.prototype.getTicksPerBeat=function(){var t=this.datas.getUint16(12);if(32768&t)throw new Error("Time division is not expressed as ticks per beat.");return t},Ze.prototype.setTicksPerBeat=function(t){this.datas.setUint16(12,32767&t)},Ze.prototype.getSMPTEFrames=function(){const t=this.datas.getUint16(12);let e;if(!(32768&t))throw new Error("Time division is not expressed as frames per seconds.");if(e=32512&t,-1===[24,25,29,30].indexOf(e))throw new Error("Invalid SMPTE frames value ("+e+").");return 29===e?29.97:e},Ze.prototype.getTicksPerFrame=function(){const t=this.datas.getUint16(12);if(!(32768&t))throw new Error("Time division is not expressed as frames per seconds.");return 255&t},Ze.prototype.setSMTPEDivision=function(t,e){if(29.97===t&&(t=29),-1===[24,25,29,30].indexOf(t))throw new Error("Invalid SMPTE frames value given ("+t+").");if(0>e||255<e)throw new Error("Invalid ticks per frame value given ("+t+").");this.datas.setUint8(12,128|t),this.datas.setUint8(13,e)};var qe=Ze;function Ge(t,e){let n,r;if(t){if(!(t instanceof ArrayBuffer))throw new Error("Invalid buffer received.");if(12>t.byteLength-e)throw new Error("Invalid MIDIFileTrack (0x"+e.toString(16)+") : Buffer length must size at least 12bytes");if(this.datas=new DataView(t,e,Ge.HDR_LENGTH),"M"!==String.fromCharCode(this.datas.getUint8(0))||"T"!==String.fromCharCode(this.datas.getUint8(1))||"r"!==String.fromCharCode(this.datas.getUint8(2))||"k"!==String.fromCharCode(this.datas.getUint8(3)))throw new Error("Invalid MIDIFileTrack (0x"+e.toString(16)+") : MTrk prefix not found");if(r=this.getTrackLength(),t.byteLength-e<r)throw new Error("Invalid MIDIFileTrack (0x"+e.toString(16)+") : The track size exceed the buffer length.");if(this.datas=new DataView(t,e,Ge.HDR_LENGTH+r),255!==this.datas.getUint8(Ge.HDR_LENGTH+(r-3))||47!==this.datas.getUint8(Ge.HDR_LENGTH+(r-2))||0!==this.datas.getUint8(Ge.HDR_LENGTH+(r-1)))throw new Error("Invalid MIDIFileTrack (0x"+e.toString(16)+") : No track end event found at the expected index ("+(Ge.HDR_LENGTH+(r-1)).toString(16)+").")}else n=new Uint8Array(12),n[0]=77,n[1]=84,n[2]=114,n[3]=107,n[4]=0,n[5]=0,n[6]=0,n[7]=4,n[8]=0,n[9]=255,n[10]=47,n[11]=0,this.datas=new DataView(n.buffer,0,Ge.HDR_LENGTH+4)}Ge.HDR_LENGTH=8,Ge.prototype.getTrackLength=function(){return this.datas.getUint32(4)},Ge.prototype.setTrackLength=function(t){return this.datas.setUint32(4,t)},Ge.prototype.getTrackContent=function(){return new DataView(this.datas.buffer,this.datas.byteOffset+Ge.HDR_LENGTH,this.datas.byteLength-Ge.HDR_LENGTH)},Ge.prototype.setTrackContent=function(t){let e,n,r,i;const a=t.byteLength-t.byteOffset;if(4>a)throw new Error("Invalid track length, must size at least 4bytes");for(this.datas=new DataView(new Uint8Array(Ge.HDR_LENGTH+a).buffer),this.datas.setUint8(0,77),this.datas.setUint8(1,84),this.datas.setUint8(2,114),this.datas.setUint8(3,107),this.datas.setUint32(4,a),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=new Uint8Array(this.datas.buffer,Ge.HDR_LENGTH,a),r=0,i=e.length;r<i;r++)n[r]=e[r]};var Ye=Ge;function Ke(){throw new Error("MIDIEvents function not intended to be run.")}Ke.EVENT_META=255,Ke.EVENT_SYSEX=240,Ke.EVENT_DIVSYSEX=247,Ke.EVENT_MIDI=8,Ke.EVENT_META_SEQUENCE_NUMBER=0,Ke.EVENT_META_TEXT=1,Ke.EVENT_META_COPYRIGHT_NOTICE=2,Ke.EVENT_META_TRACK_NAME=3,Ke.EVENT_META_INSTRUMENT_NAME=4,Ke.EVENT_META_LYRICS=5,Ke.EVENT_META_MARKER=6,Ke.EVENT_META_CUE_POINT=7,Ke.EVENT_META_MIDI_CHANNEL_PREFIX=32,Ke.EVENT_META_END_OF_TRACK=47,Ke.EVENT_META_SET_TEMPO=81,Ke.EVENT_META_SMTPE_OFFSET=84,Ke.EVENT_META_TIME_SIGNATURE=88,Ke.EVENT_META_KEY_SIGNATURE=89,Ke.EVENT_META_SEQUENCER_SPECIFIC=127,Ke.EVENT_MIDI_NOTE_OFF=8,Ke.EVENT_MIDI_NOTE_ON=9,Ke.EVENT_MIDI_NOTE_AFTERTOUCH=10,Ke.EVENT_MIDI_CONTROLLER=11,Ke.EVENT_MIDI_PROGRAM_CHANGE=12,Ke.EVENT_MIDI_CHANNEL_AFTERTOUCH=13,Ke.EVENT_MIDI_PITCH_BEND=14,Ke.MIDI_1PARAM_EVENTS=[Ke.EVENT_MIDI_PROGRAM_CHANGE,Ke.EVENT_MIDI_CHANNEL_AFTERTOUCH],Ke.MIDI_2PARAMS_EVENTS=[Ke.EVENT_MIDI_NOTE_OFF,Ke.EVENT_MIDI_NOTE_ON,Ke.EVENT_MIDI_NOTE_AFTERTOUCH,Ke.EVENT_MIDI_CONTROLLER,Ke.EVENT_MIDI_PITCH_BEND],Ke.createParser=function(t,e,n){var r,i,a,o,s;if(t instanceof DataView&&(t={position:e||0,buffer:t,readUint8:function(){return this.buffer.getUint8(this.position++)},readUint16:function(){var t=this.buffer.getUint16(this.position);return this.position=this.position+2,t},readUint32:function(){var t=this.buffer.getUint16(this.position);return this.position=this.position+2,t},readVarInt:function(){for(var t,e=0,n=0;4>n++;){if(!(128&(t=this.readUint8())))return e+t;e+=127&t,e<<=7}throw new Error("0x"+this.position.toString(16)+": Variable integer length cannot exceed 4 bytes")},readBytes:function(t){for(var e=[];0<t;t--)e.push(this.readUint8());return e},pos:function(){return"0x"+(this.buffer.byteOffset+this.position).toString(16)},end:function(){return this.position===this.buffer.byteLength}},e=0),0<e)for(;e--;)t.readUint8();return{next:function(){if(t.end())return null;if(i={index:t.pos(),delta:t.readVarInt()},240==(240&(r=t.readUint8()))){if(r!==Ke.EVENT_META){if(r===Ke.EVENT_SYSEX||r===Ke.EVENT_DIVSYSEX)return i.type=r,i.length=t.readVarInt(),i.data=t.readBytes(i.length),i;if(n)throw new Error(t.pos()+" Unknown event type "+r.toString(16)+", Delta: "+i.delta+".");return i.type=r,i.badsubtype=t.readVarInt(),i.length=t.readUint8(),i.data=t.readBytes(i.length),i}switch(i.type=Ke.EVENT_META,i.subtype=t.readUint8(),i.length=t.readVarInt(),i.subtype){case Ke.EVENT_META_SEQUENCE_NUMBER:if(n&&2!==i.length)throw new Error(t.pos()+" Bad metaevent length.");return i.msb=t.readUint8(),i.lsb=t.readUint8(),i;case Ke.EVENT_META_TEXT:case Ke.EVENT_META_COPYRIGHT_NOTICE:case Ke.EVENT_META_TRACK_NAME:case Ke.EVENT_META_INSTRUMENT_NAME:case Ke.EVENT_META_LYRICS:case Ke.EVENT_META_MARKER:case Ke.EVENT_META_CUE_POINT:return i.data=t.readBytes(i.length),i;case Ke.EVENT_META_MIDI_CHANNEL_PREFIX:if(n&&1!==i.length)throw new Error(t.pos()+" Bad metaevent length.");return i.prefix=t.readUint8(),i;case Ke.EVENT_META_END_OF_TRACK:if(n&&0!==i.length)throw new Error(t.pos()+" Bad metaevent length.");return i;case Ke.EVENT_META_SET_TEMPO:if(n&&3!==i.length)throw new Error(t.pos()+" Tempo meta event length must be 3.");return i.tempo=(t.readUint8()<<16)+(t.readUint8()<<8)+t.readUint8(),i.tempoBPM=6e7/i.tempo,i;case Ke.EVENT_META_SMTPE_OFFSET:if(n&&5!==i.length)throw new Error(t.pos()+" Bad metaevent length.");if(i.hour=t.readUint8(),n&&23<i.hour)throw new Error(t.pos()+" SMTPE offset hour value must be part of 0-23.");if(i.minutes=t.readUint8(),n&&59<i.minutes)throw new Error(t.pos()+" SMTPE offset minutes value must be part of 0-59.");if(i.seconds=t.readUint8(),n&&59<i.seconds)throw new Error(t.pos()+" SMTPE offset seconds value must be part of 0-59.");if(i.frames=t.readUint8(),n&&30<i.frames)throw new Error(t.pos()+" SMTPE offset frames value must be part of 0-30.");if(i.subframes=t.readUint8(),n&&99<i.subframes)throw new Error(t.pos()+" SMTPE offset subframes value must be part of 0-99.");return i;case Ke.EVENT_META_KEY_SIGNATURE:if(n&&2!==i.length)throw new Error(t.pos()+" Bad metaevent length.");if(i.key=t.readUint8(),n&&(-7>i.key||7<i.key))throw new Error(t.pos()+" Bad metaevent length.");if(i.scale=t.readUint8(),n&&0!==i.scale&&1!==i.scale)throw new Error(t.pos()+" Key signature scale value must be 0 or 1.");return i;case Ke.EVENT_META_TIME_SIGNATURE:if(n&&4!==i.length)throw new Error(t.pos()+" Bad metaevent length.");return i.data=t.readBytes(i.length),i.param1=i.data[0],i.param2=i.data[1],i.param3=i.data[2],i.param4=i.data[3],i;case Ke.EVENT_META_SEQUENCER_SPECIFIC:return i.data=t.readBytes(i.length),i;default:if(n)throw new Error(t.pos()+" Unknown meta event type ("+i.subtype.toString(16)+").");return i.data=t.readBytes(i.length),i}}else{if(0==(128&r)){if(!a)throw new Error(t.pos()+" Running status without previous event");s=r}else a=r>>4,o=15&r,s=t.readUint8();switch(i.type=Ke.EVENT_MIDI,i.subtype=a,i.channel=o,i.param1=s,a){case Ke.EVENT_MIDI_NOTE_OFF:return i.param2=t.readUint8(),i;case Ke.EVENT_MIDI_NOTE_ON:return i.param2=t.readUint8(),i.param2||(i.subtype=Ke.EVENT_MIDI_NOTE_OFF,i.param2=127),i;case Ke.EVENT_MIDI_NOTE_AFTERTOUCH:case Ke.EVENT_MIDI_CONTROLLER:return i.param2=t.readUint8(),i;case Ke.EVENT_MIDI_PROGRAM_CHANGE:case Ke.EVENT_MIDI_CHANNEL_AFTERTOUCH:return i;case Ke.EVENT_MIDI_PITCH_BEND:return i.param2=t.readUint8(),i;default:if(n)throw new Error(t.pos()+" Unknown MIDI event type ("+a.toString(16)+").");return i}}}}},Ke.writeToTrack=function(t,e,n){var r,i,a,o,s=0;for(r=0,i=t.length;r<i;r++){if(t[r].delta>>>28)throw Error("Event #"+r+": Maximum delta time value reached ("+t[r].delta+"/134217728 max)");if(t[r].delta>>>21&&(e[s++]=t[r].delta>>>21&127|128),t[r].delta>>>14&&(e[s++]=t[r].delta>>>14&127|128),t[r].delta>>>7&&(e[s++]=t[r].delta>>>7&127|128),e[s++]=127&t[r].delta,t[r].type===Ke.EVENT_MIDI)e[s++]=(t[r].subtype<<4)+t[r].channel,e[s++]=t[r].param1,-1!==Ke.MIDI_2PARAMS_EVENTS.indexOf(t[r].subtype)&&(e[s++]=t[r].param2);else{if(e[s++]=t[r].type,t[r].type===Ke.EVENT_META&&(e[s++]=t[r].subtype),t[r].length>>>28)throw Error("Event #"+r+": Maximum length reached ("+t[r].length+"/134217728 max)");if(t[r].length>>>21&&(e[s++]=t[r].length>>>21&127|128),t[r].length>>>14&&(e[s++]=t[r].length>>>14&127|128),t[r].length>>>7&&(e[s++]=t[r].length>>>7&127|128),e[s++]=127&t[r].length,t[r].type===Ke.EVENT_META)switch(t[r].subtype){case Ke.EVENT_META_SEQUENCE_NUMBER:e[s++]=t[r].msb,e[s++]=t[r].lsb;break;case Ke.EVENT_META_TEXT:case Ke.EVENT_META_COPYRIGHT_NOTICE:case Ke.EVENT_META_TRACK_NAME:case Ke.EVENT_META_INSTRUMENT_NAME:case Ke.EVENT_META_LYRICS:case Ke.EVENT_META_MARKER:case Ke.EVENT_META_CUE_POINT:for(a=0,o=t[r].length;a<o;a++)e[s++]=t[r].data[a];break;case Ke.EVENT_META_MIDI_CHANNEL_PREFIX:e[s++]=t[r].prefix;break;case Ke.EVENT_META_END_OF_TRACK:break;case Ke.EVENT_META_SET_TEMPO:e[s++]=t[r].tempo>>16,e[s++]=t[r].tempo>>8&255,e[s++]=255&t[r].tempo;break;case Ke.EVENT_META_SMTPE_OFFSET:if(n&&23<t[r].hour)throw new Error("Event #"+r+": SMTPE offset hour value must be part of 0-23.");if(e[s++]=t[r].hour,n&&59<t[r].minutes)throw new Error("Event #"+r+": SMTPE offset minutes value must be part of 0-59.");if(e[s++]=t[r].minutes,n&&59<t[r].seconds)throw new Error("Event #"+r+": SMTPE offset seconds value must be part of 0-59.");if(e[s++]=t[r].seconds,n&&30<t[r].frames)throw new Error("Event #"+r+": SMTPE offset frames amount must be part of 0-30.");if(e[s++]=t[r].frames,n&&99<t[r].subframes)throw new Error("Event #"+r+": SMTPE offset subframes amount must be part of 0-99.");e[s++]=t[r].subframes;break;case Ke.EVENT_META_KEY_SIGNATURE:if("number"!=typeof t[r].key||-7>t[r].key||7<t[r].scale)throw new Error("Event #"+r+":The key signature key must be between -7 and 7");if("number"!=typeof t[r].scale||0>t[r].scale||1<t[r].scale)throw new Error("Event #"+r+":The key signature scale must be 0 or 1");e[s++]=t[r].key,e[s++]=t[r].scale;break;case Ke.EVENT_META_TIME_SIGNATURE:case Ke.EVENT_META_SEQUENCER_SPECIFIC:default:for(a=0,o=t[r].length;a<o;a++)e[s++]=t[r].data[a]}else for(a=0,o=t[r].length;a<o;a++)e[s++]=t[r].data[a]}}},Ke.getRequiredBufferLength=function(t){var e,n=0,r=0;for(r=0,e=t.length;r<e;r++)n+=t[r].delta>>>21?4:t[r].delta>>>14?3:t[r].delta>>>7?2:1,t[r].type===Ke.EVENT_MIDI?(n++,n++,-1!==Ke.MIDI_2PARAMS_EVENTS.indexOf(t[r].subtype)&&n++):(n++,t[r].type===Ke.EVENT_META&&n++,n+=t[r].length>>>21?4:t[r].length>>>14?3:t[r].length>>>7?2:1,n+=t[r].length);return n};var We=Ke,Xe={isNotUTF8:function(t,e,n){try{tn(t,e,n,!0)}catch(t){return!0}return!1},getCharLength:Qe,getCharCode:Je,getStringFromBytes:tn,getBytesForCharCode:en,setBytesFromCharCode:nn,setBytesFromString:function(t,e,n,r,i){t=t||"",e=e||[],n|=0,r="number"==typeof r?r:e.byteLength||1/0;for(var a=0,o=t.length;a<o;a++){var s=en(t[a].codePointAt(0));if(i&&n+s>r)throw new Error('Not enought bytes to encode the char "'+t[a]+'" at the offset "'+n+'".');nn(t[a].codePointAt(0),e,n,s),n+=s}return e}};function Qe(t){return 240==(240&t)?4:224==(224&t)?3:192==(192&t)?2:t==(127&t)?1:0}function Je(t,e,n){var r=0,i="";if(e=e||0,t.length-e<=0)throw new Error("No more characters remaining in array.");if(0==(n=n||Qe(t[e])))throw new Error(t[e].toString(2)+" is not a significative byte (offset:"+e+").");if(1===n)return t[e];if(t.length-e<n)throw new Error("Expected at least "+n+" bytes remaining in array.");if(i="00000000".slice(0,n)+1+"00000000".slice(n+1),t[e]&parseInt(i,2))throw Error("Index "+e+": A "+n+" bytes encoded char cannot encode the "+(n+1)+"th rank bit to 1.");for(i="0000".slice(0,n+1)+"11111111".slice(n+1),r+=(t[e]&parseInt(i,2))<<6*--n;n;){if(128!=(128&t[e+1])||64==(64&t[e+1]))throw Error("Index "+(e+1)+': Next bytes of encoded char must begin with a "10" bit sequence.');r+=(63&t[++e])<<6*--n}return r}function tn(t,e,n,r){var i,a=[];for(e|=0,n="number"==typeof n?n:t.byteLength||t.length;e<n;e++){if(e+(i=Qe(t[e]))>n){if(r)throw Error("Index "+e+": Found a "+i+" bytes encoded char declaration but only "+(n-e)+" bytes are available.")}else a.push(String.fromCodePoint(Je(t,e,i)));e+=i-1}return a.join("")}function en(t){if(t<128)return 1;if(t<2048)return 2;if(t<65536)return 3;if(t<2097152)return 4;throw new Error("CharCode "+t+" cannot be encoded with UTF8.")}function nn(t,e,n,r){if(t|=0,e=e||[],n|=0,1==(r=r||en(t)))e[n]=t;else for(e[n++]=(parseInt("1111".slice(0,r),2)<<8-r)+(t>>>6*--r);r>0;)e[n++]=t>>>6*--r&63|128;return e}function rn(t,e){var n,r,i,a;if(t){if(25>(t=function(t){if(t){if(t instanceof ArrayBuffer)return t;if(t instanceof Uint8Array)return new Uint8Array(t).buffer}throw new Error("Unsupported buffer type, need ArrayBuffer or Uint8Array")}(t)).byteLength)throw new Error("A buffer of a valid MIDI file must have, at least, a size of 25bytes.");for(this.header=new qe(t),this.tracks=[],r=qe.HEADER_LENGTH,i=0,a=this.header.getTracksCount();i<a;i++){if(e&&r>=t.byteLength-1)throw new Error("Couldn't find datas corresponding to the track #"+i+".");n=new Ye(t,r),this.tracks.push(n),r+=n.getTrackLength()+8}if(e&&r!==t.byteLength)throw new Error("It seems that the buffer contains too much datas.")}else this.header=new qe,this.tracks=[new Ye]}rn.prototype.getEvents=function(t,e){var n,r,i,a,o,s,l=0,c=[],d=this.header.getFormat(),u=this.header.getTickResolution();if(1!==d||1===this.tracks.length)for(i=0,a=this.tracks.length;i<a;i++)for(l=2===d&&l?l:0,r=(n=We.createParser(this.tracks[i].getTrackContent(),0,!1)).next();r;)l+=r.delta?r.delta*u/1e3:0,r.type===We.EVENT_META&&r.subtype===We.EVENT_META_SET_TEMPO&&(u=this.header.getTickResolution(r.tempo)),t&&r.type!==t||e&&(!r.subtype||r.subtype!==e)||(r.playTime=l,c.push(r)),r=n.next();else{for(o=[],s=-1,i=0,a=this.tracks.length;i<a;i++)o[i]={},o[i].parser=We.createParser(this.tracks[i].getTrackContent(),0,!1),o[i].curEvent=o[i].parser.next();do{for(s=-1,i=0,a=o.length;i<a;i++)o[i].curEvent&&(-1===s||o[i].curEvent.delta<o[s].curEvent.delta)&&(s=i);if(-1!==s){for(i=0,a=o.length;i<a;i++)i!==s&&o[i].curEvent&&(o[i].curEvent.delta-=o[s].curEvent.delta);l+=(r=o[s].curEvent).delta?r.delta*u/1e3:0,r.type===We.EVENT_META&&r.subtype===We.EVENT_META_SET_TEMPO&&(u=this.header.getTickResolution(r.tempo)),t&&r.type!==t||e&&(!r.subtype||r.subtype!==e)||(r.playTime=l,r.track=s,c.push(r)),o[s].curEvent=o[s].parser.next()}}while(-1!==s)}return c},rn.prototype.getMidiEvents=function(){return this.getEvents(We.EVENT_MIDI)},rn.prototype.getLyrics=function(){var t,e,n,r=this.getEvents(We.EVENT_META),i=[],a=[];for(e=0,n=r.length;e<n;e++)(t=r[e]).subtype===We.EVENT_META_LYRICS?a.push(t):t.subtype===We.EVENT_META_TEXT&&("@"===String.fromCharCode(t.data[0])?"T"===String.fromCharCode(t.data[1])||"I"===String.fromCharCode(t.data[1])||String.fromCharCode(t.data[1]):0===String.fromCharCode.apply(String,t.data).indexOf("words")?i.length=0:0!==t.playTime&&i.push(t));2<a.length?i=a:i.length||(i=[]);try{i.forEach((function(t){t.text=Xe.getStringFromBytes(t.data,0,t.length,!0)}))}catch(t){i.forEach((function(t){t.text=t.data.map((function(t){return String.fromCharCode(t)})).join("")}))}return i},rn.prototype.getTrackEvents=function(t){var e,n,r=[];if(t>this.tracks.length||0>t)throw Error("Invalid track index ("+t+")");e=(n=We.createParser(this.tracks[t].getTrackContent(),0,!1)).next();do{r.push(e),e=n.next()}while(e);return r},rn.prototype.setTrackEvents=function(t,e){var n,r;if(t>this.tracks.length||0>t)throw Error("Invalid track index ("+t+")");if(!e||!e.length)throw Error("A track must contain at least one event, none given.");n=We.getRequiredBufferLength(e),r=new Uint8Array(n),We.writeToTrack(e,r),this.tracks[t].setTrackContent(r)},rn.prototype.deleteTrack=function(t){if(t>this.tracks.length||0>t)throw Error("Invalid track index ("+t+")");this.tracks.splice(t,1),this.header.setTracksCount(this.tracks.length)},rn.prototype.addTrack=function(t){var e;if(t>this.tracks.length||0>t)throw Error("Invalid track index ("+t+")");e=new Ye,t===this.tracks.length?this.tracks.push(e):this.tracks.splice(t,0,e),this.header.setTracksCount(this.tracks.length)},rn.prototype.getContent=function(){var t,e,n,r,i,a,o,s,l;for(t=qe.HEADER_LENGTH,r=0,i=this.tracks.length;r<i;r++)t+=this.tracks[r].getTrackLength()+8;for(e=new Uint8Array(t),n=new Uint8Array(this.header.datas.buffer,this.header.datas.byteOffset,qe.HEADER_LENGTH),r=0,i=qe.HEADER_LENGTH;r<i;r++)e[r]=n[r];for(a=0,o=this.tracks.length;a<o;a++)for(n=new Uint8Array(this.tracks[a].datas.buffer,this.tracks[a].datas.byteOffset,this.tracks[a].datas.byteLength),s=0,l=this.tracks[a].datas.byteLength;s<l;s++)e[r++]=n[s];return e.buffer},rn.Header=qe,rn.Track=Ye;var an=rn;const on="!@#$%^&*()QWERTYUIOPASDFGHJKLZXCBVNM";class sn{constructor(t,e,n,r,i,a="keep",o="keep"){this.value=t,this.playTime=e,this.delta=i,this.char=dn[t-21],this.tempo=n,this.BPM=r,this.valid=t>=21&&t<=108,this.outOfRange=t<=35||t>=97,on.includes(this.char)?"Start"===a?this.displayValue=t-108:"End"==a&&(this.displayValue=t+108):this.outOfRange?"Start"===o?this.displayValue=t-1024:"End"==o?this.displayValue=t+1024:hn.includes(this.char)?this.displayValue=t-1024:this.displayValue=t+1024:this.displayValue=t}}class ln{constructor(t,e=!0,n=!0){let r=!1,i=t[0];for(let e of t){if(e.playTime!=i.playTime){r=!0;break}i=e}if(this.is_quantized=r,r)r&&(this.notes=n?t:this.#t(t,e));else{let n=[],r=[];t.forEach((t=>{n.includes(t.value)||(n.push(t.value),r.push(t))})),this.notes=this.#t(r,e)}}#t(t,e){return e?this.#e(t):t.sort(((t,e)=>t.displayValue-e.displayValue))}#e(t){let e,n=[],r=[],i=[],a=[],o=[],s=[];t=t.sort(((t,e)=>t.value-e.value));for(const n of t)n.outOfRange?n.value-1024===n.displayValue?o.push(n):n.value+1024===n.displayValue&&s.push(n):(isNaN(n.char)?on.includes(n.char)?i.push(n):a.push(n):r.push(n),e=n);return e&&(n=on.includes(e.char)?[...r,...a,...i]:[...i,...r,...a]),[...o,...n,...s]}}class cn{constructor(t){this.chords=t,this.missingTempo=!1}transpose(t,e="Start",n="Start",r=!0,i=!0){if(!this.chords)return;let a=[];return this.chords.forEach((o=>{let s=[];o.notes.forEach((r=>{s.push(new sn(r.value+t,r.playTime,r.tempo,r.BPM,r.delta,e,n))})),a.push(new ln(s,r,i))})),new cn(a)}countNotes(){let t=0;for(let e of this.chords)for(let n of e.notes)t++;return t}text(){let t="",e=this.chords;for(let n=0;n<e.length;n++){if(!e){t+="[no-chords] ";continue}const r=e[n];let i=r.notes.length>1&&r.notes.find((t=>!0===t.valid));r.notes.filter((t=>!1===t.outOfRange)).length<=1&&(i=!1),i&&(t+="[");for(const e of r.notes)t+=e.char;i&&(t+="]"),t+=" "}return t}}const dn="1234567890qwert1!2@34$5%6^78*9(0qQwWeErtTyYuiIoOpPasSdDfgGhHjJklLzZxcCvVbBnmyuiopasdfghj",un="1234567890qwertyuiopasdfghjklzxcvbnm",hn=un.slice(0,15);function fn(t,e,n=0,r=!1,i=4,a=0){if(!t?.chords)return n;function o(t){let e=[];for(let n of t.chords)for(let t of n.notes)e.push({char:t.char,oor:t.outOfRange,valid:t.valid});let n=e.filter((t=>!1===t.oor&&!0===t.valid)),r=n.filter((t=>un.includes(t.char))),i=n.filter((t=>!un.includes(t.char)));return Math.abs(i.length-r.length)}let s=o(t.transpose(n)),l=n;function c(e){let n=o(t.transpose(e));if(n>s){if(!r){if(n-s<=i)return}s=n,l=e}}for(let t=0;t<=e;t++)c(n-t),c(n+t);return l}function pn(t,e){return e<t/4?"-":e<t/2?" ":e<t?" - ":e<2*t?", ":e<3*t?"... ":e<4*t?".... ":"...... "}function mn(t,e,n){const r=t.slice();return r[21]=e[n],r}function gn(t){let e,n,i,a,f,m,E,x,k,T,A,S,N,C,I,M,z,D,R,U,$,F,L,P,V,B,H,j,Z,q,G,Y,K,W,X,Q,J,tt,et,nt,rt,it,at,ot,st,lt,ct,dt,ut,ht,ft,pt,mt,gt,wt,_t,bt,yt,vt,Et,xt,kt,Tt,At,St,Nt,Ct,It,Mt,zt=t[0].lbauto_atleast+"";function Dt(t,e){return t[2]?_n:wn}let Rt=Dt(t),Ut=Rt(t),Ot=1==t[0].missingTempo&&bn(t),$t=t[2]&&yn(t),Ft=t[0].oors&&t[0].tempoMarks&&vn(t),Lt=t[4],Pt=[];for(let e=0;e<Lt.length;e+=1)Pt[e]=En(mn(t,Lt,e));return{c(){e=d("div"),n=d("div"),i=d("label"),i.textContent="Transpose (sheet) by:",a=h(),f=d("input"),m=h(),E=d("button"),E.textContent="Auto-transpose",x=h(),k=d("hr"),T=h(),A=d("div"),S=d("button"),S.textContent="Line-based auto-transpose",N=h(),C=d("div"),I=d("label"),I.textContent="Resilience (?):",M=h(),z=d("input"),D=h(),R=d("span"),U=u(zt),$=h(),F=d("hr"),L=h(),P=d("div"),V=d("div"),B=d("label"),B.textContent="Place shifted notes at:",H=h(),j=d("select"),Z=d("option"),Z.textContent="Start",q=d("option"),q.textContent="End",K=h(),W=d("div"),X=d("label"),X.textContent="Place out of range notes at:",Q=h(),J=d("select"),tt=d("option"),tt.textContent="Inorder",et=d("option"),et.textContent="Start",nt=d("option"),nt.textContent="End",rt=h(),it=d("hr"),at=h(),Ut.c(),ot=h(),Ot&&Ot.c(),st=h(),$t&&$t.c(),lt=h(),ct=d("div"),dt=h(),ut=d("label"),ht=d("input"),ft=u("\n        Include out of range (ctrl) notes"),pt=h(),mt=d("label"),gt=d("input"),wt=u("\n        Show tempo marks"),_t=h(),Ft&&Ft.c(),bt=h(),yt=d("hr"),vt=h(),Et=d("div"),xt=d("label"),xt.textContent="Font:",kt=h(),Tt=d("select");for(let t=0;t<Pt.length;t+=1)Pt[t].c();At=h(),St=d("hr"),Nt=h(),Ct=d("style"),Ct.textContent='label {\n        max-width: fit-content;\n        text-align: center;\n    }\n\n    .select-div {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        text-align: center;\n    }\n\n    select {\n        height: auto;\n        margin-left: 0.4em;\n        margin-top: 0.2em;\n        margin-bottom: 0;\n    }\n    \n    select option {\n        background: #2D2A32;\n    }\n\n    input[type="checkbox"] {\n        display: inline-block;\n        vertical-align: middle;\n    }\n\n    input[type="range"] {\n        margin-left: 0.4em;\n        margin-right: 0.4em;\n        margin-bottom: 0;\n    }\n\n    input[type="file"] {\n        margin-bottom: 0;\n    }\n\n    input[type="text"] {\n        margin-bottom: 0;\n    }\n    \n    .beats, .select-label, .tempo {\n        display: flex;\n        flex-direction: row;\n    }',g(i,"class","m-1 flex flex-col align-middle"),g(i,"for","transpose"),g(f,"id","transpose"),g(f,"type","number"),g(f,"min","-24"),g(f,"max","24"),g(f,"class","w-16 box-border"),g(n,"class","flex flex-row gap-2"),y(e,"display","inline-block"),g(k,"class","my-2 mx-1"),y(S,"margin-bottom","0"),g(I,"class","flex flex-row items-center"),g(I,"title","Controls how much better a transposition should be than the previous transposition for line-based auto-transpose to act (higher = less transposing)"),g(I,"for","atleast"),g(z,"class","w-32"),g(z,"id","atleast"),g(z,"type","range"),g(z,"min","1"),g(z,"max","24"),y(R,"display","flex"),y(R,"align-items","center"),g(C,"class","flex flex-row mt-3"),g(A,"class","flex flex-col items-start align-middle"),g(F,"class","my-2 mx-1"),g(B,"for","shifts-position"),Z.__value="Start",Z.value=Z.__value,q.__value="End",q.value=q.__value,j.disabled=G=t[0].classicChordOrder,g(j,"title",Y=t[0].classicChordOrder?'Disable "Classic chord order" to customize this.':""),g(j,"name","shifts-position"),g(j,"id","shifts-position"),void 0===t[0].pShifts&&O((()=>t[9].call(j))),g(V,"class","select-div"),g(X,"for","oors-position"),tt.__value="Inorder",tt.value=tt.__value,et.__value="Start",et.value=et.__value,nt.__value="End",nt.value=nt.__value,g(J,"name","oors-position"),g(J,"id","oors-position"),void 0===t[0].pOors&&O((()=>t[10].call(J))),g(W,"class","select-div"),g(it,"class","my-2 mx-1"),g(ht,"type","checkbox"),g(ht,"id","out-of-range"),g(ut,"for","out-of-range"),g(gt,"type","checkbox"),g(gt,"id","tempo-checkbox"),g(mt,"for","tempo-checkbox"),g(yt,"class","my-2 mx-1"),g(xt,"for","font"),g(Tt,"name","font"),g(Tt,"id","font"),void 0===t[0].font&&O((()=>t[20].call(Tt))),g(Et,"class","select-div"),g(St,"class","my-2 mx-1")},m(r,l){s(r,e,l),o(e,n),o(n,i),o(n,a),o(n,f),b(f,t[0].transposition),o(n,m),o(n,E),s(r,x,l),s(r,k,l),s(r,T,l),s(r,A,l),o(A,S),o(A,N),o(A,C),o(C,I),o(C,M),o(C,z),b(z,t[0].lbauto_atleast),o(C,D),o(C,R),o(R,U),s(r,$,l),s(r,F,l),s(r,L,l),s(r,P,l),o(P,V),o(V,B),o(V,H),o(V,j),o(j,Z),o(j,q),v(j,t[0].pShifts),o(P,K),o(P,W),o(W,X),o(W,Q),o(W,J),o(J,tt),o(J,et),o(J,nt),v(J,t[0].pOors),o(P,rt),o(P,it),o(P,at),Ut.m(P,null),o(P,ot),Ot&&Ot.m(P,null),o(P,st),$t&&$t.m(P,null),o(P,lt),o(P,ct),o(P,dt),o(P,ut),o(ut,ht),ht.checked=t[0].oors,o(ut,ft),o(P,pt),o(P,mt),o(mt,gt),gt.checked=t[0].tempoMarks,o(mt,wt),o(P,_t),Ft&&Ft.m(P,null),o(P,bt),o(P,yt),o(P,vt),o(P,Et),o(Et,xt),o(Et,kt),o(Et,Tt);for(let t=0;t<Pt.length;t+=1)Pt[t].m(Tt,null);v(Tt,t[0].font),o(P,At),o(P,St),s(r,Nt,l),s(r,Ct,l),It||(Mt=[p(f,"input",t[5]),p(E,"click",t[6]),p(S,"click",t[7]),p(z,"change",t[8]),p(z,"input",t[8]),p(j,"change",t[9]),p(J,"change",t[10]),p(ht,"change",t[16]),p(gt,"change",t[17]),p(Tt,"change",t[20])],It=!0)},p(t,e){if(1&e&&w(f.value)!==t[0].transposition&&b(f,t[0].transposition),1&e&&b(z,t[0].lbauto_atleast),1&e&&zt!==(zt=t[0].lbauto_atleast+"")&&_(U,zt),1&e&&G!==(G=t[0].classicChordOrder)&&(j.disabled=G),1&e&&Y!==(Y=t[0].classicChordOrder?'Disable "Classic chord order" to customize this.':"")&&g(j,"title",Y),1&e&&v(j,t[0].pShifts),1&e&&v(J,t[0].pOors),Rt===(Rt=Dt(t))&&Ut?Ut.p(t,e):(Ut.d(1),Ut=Rt(t),Ut&&(Ut.c(),Ut.m(P,ot))),1==t[0].missingTempo?Ot?Ot.p(t,e):(Ot=bn(t),Ot.c(),Ot.m(P,st)):Ot&&(Ot.d(1),Ot=null),t[2]?$t?$t.p(t,e):($t=yn(t),$t.c(),$t.m(P,lt)):$t&&($t.d(1),$t=null),1&e&&(ht.checked=t[0].oors),1&e&&(gt.checked=t[0].tempoMarks),t[0].oors&&t[0].tempoMarks?Ft?Ft.p(t,e):(Ft=vn(t),Ft.c(),Ft.m(P,bt)):Ft&&(Ft.d(1),Ft=null),16&e){let n;for(Lt=t[4],n=0;n<Lt.length;n+=1){const r=mn(t,Lt,n);Pt[n]?Pt[n].p(r,e):(Pt[n]=En(r),Pt[n].c(),Pt[n].m(Tt,null))}for(;n<Pt.length;n+=1)Pt[n].d(1);Pt.length=Lt.length}1&e&&v(Tt,t[0].font)},d(t){t&&l(e),t&&l(x),t&&l(k),t&&l(T),t&&l(A),t&&l($),t&&l(F),t&&l(L),t&&l(P),Ut.d(),Ot&&Ot.d(),$t&&$t.d(),Ft&&Ft.d(),c(Pt,t),t&&l(Nt),t&&l(Ct),It=!1,r(Mt)}}}function wn(e){let n;return{c(){n=d("i"),n.textContent="Some settings are not available because the original MIDI data is missing."},m(t,e){s(t,n,e)},p:t,d(t){t&&l(n)}}}function _n(t){let e,n,i,a,c,f,m,w,y,v,E=1==t[0].beats?"1 beat":`${t[0].beats} beats`;return{c(){e=d("div"),n=d("label"),n.textContent="Break lines:",i=h(),a=d("input"),c=h(),f=d("span"),m=u("Every "),w=u(E),g(n,"class","slider-label"),g(n,"for","beats-for-newline"),g(a,"type","range"),g(a,"id","beats-for-newline"),g(a,"min","1"),g(a,"max","32"),g(e,"class","beats")},m(r,l){s(r,e,l),o(e,n),o(e,i),o(e,a),b(a,t[0].beats),o(e,c),o(e,f),o(f,m),o(f,w),y||(v=[p(a,"change",t[11]),p(a,"input",t[11])],y=!0)},p(t,e){1&e&&b(a,t[0].beats),1&e&&E!==(E=1==t[0].beats?"1 beat":`${t[0].beats} beats`)&&_(w,E)},d(t){t&&l(e),y=!1,r(v)}}}function bn(t){let e,n,i,a,c,f,m,w,y,v=t[0].bpm+"";return{c(){e=d("div"),n=d("label"),n.textContent="BPM (?):",i=h(),a=d("input"),c=h(),f=d("span"),m=u(v),g(n,"class","slider-label"),g(n,"for","tempo"),g(n,"title","You're able to change this because your MIDI file doesn't have tempo/BPM."),g(a,"type","range"),g(a,"id","tempo"),g(a,"min","1"),g(a,"max","300"),g(e,"class","tempo")},m(r,l){s(r,e,l),o(e,n),o(e,i),o(e,a),b(a,t[0].bpm),o(e,c),o(e,f),o(f,m),w||(y=[p(a,"change",t[12]),p(a,"input",t[12])],w=!0)},p(t,e){1&e&&b(a,t[0].bpm),1&e&&v!==(v=t[0].bpm+"")&&_(m,v)},d(t){t&&l(e),w=!1,r(y)}}}function yn(t){let e,n,i,a,c,f,m,w,y,v,E,x,k,T,A,S,N,C,I=t[0].quantize+"";return{c(){e=d("div"),n=d("label"),n.textContent="Quantize:",i=h(),a=d("input"),c=h(),f=d("span"),m=u(I),w=u(" miliseconds"),y=h(),v=d("label"),E=d("input"),x=u("\n            Classic chord order"),k=h(),T=d("label"),A=d("input"),S=u("\n            Sequential quantizes"),g(n,"class","slider-label"),g(n,"for","quantize-prompt"),g(a,"type","range"),g(a,"id","quantize-prompt"),g(a,"min","1"),g(a,"max","100"),g(e,"class","beats"),g(E,"type","checkbox"),g(E,"id","classic-chord-order"),g(v,"for","classic-chord-order"),g(A,"type","checkbox"),g(A,"id","order-quantizes"),g(T,"for","order-quantizes")},m(r,l){s(r,e,l),o(e,n),o(e,i),o(e,a),b(a,t[0].quantize),o(e,c),o(e,f),o(f,m),o(f,w),s(r,y,l),s(r,v,l),o(v,E),E.checked=t[0].classicChordOrder,o(v,x),s(r,k,l),s(r,T,l),o(T,A),A.checked=t[0].sequentialQuantize,o(T,S),N||(C=[p(a,"change",t[13]),p(a,"input",t[13]),p(E,"change",t[14]),p(A,"change",t[15])],N=!0)},p(t,e){1&e&&b(a,t[0].quantize),1&e&&I!==(I=t[0].quantize+"")&&_(m,I),1&e&&(E.checked=t[0].classicChordOrder),1&e&&(A.checked=t[0].sequentialQuantize)},d(t){t&&l(e),t&&l(y),t&&l(v),t&&l(k),t&&l(T),N=!1,r(C)}}}function vn(t){let e,n,i,a,c,u,f;return{c(){e=d("div"),n=d("label"),n.textContent="Out-of-range separator (?):",i=h(),a=d("div"),c=d("input"),g(n,"title","Helps tell you if notes are out-of-range, certain characters are restricted from use!"),g(n,"for","oor-separator"),g(c,"type","text"),g(c,"id","oor-separator"),y(a,"display","inline-flex")},m(r,l){s(r,e,l),o(e,n),o(e,i),o(e,a),o(a,c),b(c,t[0].oorSeparator),u||(f=[p(c,"input",t[18]),p(c,"input",t[19])],u=!0)},p(t,e){1&e&&c.value!==t[0].oorSeparator&&b(c,t[0].oorSeparator)},d(t){t&&l(e),u=!1,r(f)}}}function En(e){let n,r,i=e[21]+"";return{c(){n=d("option"),r=u(i),n.__value=e[21],n.value=n.__value},m(t,e){s(t,n,e),o(n,r)},p:t,d(t){t&&l(n)}}}function xn(e){let n,r=e[1]&&gn(e);return{c(){r&&r.c(),n=f()},m(t,e){r&&r.m(t,e),s(t,n,e)},p(t,[e]){t[1]?r?r.p(t,e):(r=gn(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&l(n)}}}function kn(t,e,n){let r=N(),{show:i}=e,{hasMIDI:a=!1}=e,o=["Verdana","Tahoma","Dejavu Sans","Segoe UI","Gill Sans","Helvetica","Lucida Sans","Century Gothic"],{settings:s={beats:4,quantize:35,classicChordOrder:!0,sequentialQuantize:!1,pShifts:"Start",pOors:"Inorder",oors:!0,tempoMarks:!1,oorSeparator:":",transposition:0,lbauto_atleast:4,font:o[0],capturingImage:!1,missingTempo:!1,bpm:120}}=e;return t.$$set=t=>{"show"in t&&n(1,i=t.show),"hasMIDI"in t&&n(2,a=t.hasMIDI),"settings"in t&&n(0,s=t.settings)},[s,i,a,r,o,function(){s.transposition=w(this.value),n(0,s)},()=>{r("auto")},()=>{r("lineBasedAuto")},function(){s.lbauto_atleast=w(this.value),n(0,s)},function(){s.pShifts=E(this),n(0,s)},function(){s.pOors=E(this),n(0,s)},function(){s.beats=w(this.value),n(0,s)},function(){s.bpm=w(this.value),n(0,s)},function(){s.quantize=w(this.value),n(0,s)},function(){s.classicChordOrder=this.checked,n(0,s)},function(){s.sequentialQuantize=this.checked,n(0,s)},function(){s.oors=this.checked,n(0,s)},function(){s.tempoMarks=this.checked,n(0,s)},function(){s.oorSeparator=this.value,n(0,s)},t=>{[null,"0","","    "," ","'","[","]","(",")","{","}","_","-",".",","].concat(dn.split("")).includes(t.data?.toLowerCase()??null)?n(0,s.oorSeparator=":",s):n(0,s.oorSeparator=t.data[0],s)},function(){s.font=E(this),n(0,s)}]}class Tn extends et{constructor(t){super(),tt(this,t,kn,xn,a,{show:1,hasMIDI:2,settings:0})}}function An(e){let n,r,i,a,c,f,m,w,b,v,E,x,k,T=e[1].getTrackLength()+"";return{c(){n=d("div"),r=d("input"),a=h(),c=d("label"),f=u("Track "),m=u(e[2]),w=u(" ("),b=u(T),v=u(" events)"),g(r,"id",i="trackbox"+e[2]),g(r,"type","checkbox"),y(r,"transform","scale(1.5)"),g(c,"for",E="trackbox"+e[2]),g(c,"class","mx-2"),g(n,"id","track"),g(n,"class","flex flex-row align-middle")},m(t,i){s(t,n,i),o(n,r),r.checked=e[0],o(n,a),o(n,c),o(c,f),o(c,m),o(c,w),o(c,b),o(c,v),x||(k=p(r,"change",e[3]),x=!0)},p(t,[e]){4&e&&i!==(i="trackbox"+t[2])&&g(r,"id",i),1&e&&(r.checked=t[0]),4&e&&_(m,t[2]),2&e&&T!==(T=t[1].getTrackLength()+"")&&_(b,T),4&e&&E!==(E="trackbox"+t[2])&&g(c,"for",E)},i:t,o:t,d(t){t&&l(n),x=!1,k()}}}function Sn(t,e,n){let{track:r,idx:i}=e,{selected:a=!1}=e;return t.$$set=t=>{"track"in t&&n(1,r=t.track),"idx"in t&&n(2,i=t.idx),"selected"in t&&n(0,a=t.selected)},[a,r,i,function(){a=this.checked,n(0,a)}]}class Nn extends et{constructor(t){super(),tt(this,t,Sn,An,a,{track:1,idx:2,selected:0})}}const Cn={long:"white",quadruple:"#a3f0a3",whole:"#74da74",half:"#9ada5a",quarter:"#c0c05a",eighth:"#da7e5a",sixteenth:"#daa6a6",thirtysecond:"#ff1900",sixtyfourth:"#9c0f00"};function In(t,e){return`<span style="color:${e}">${t}</span>`}function Mn(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}function zn(t){let e,n,r=t[6](t[4])+"";return{c(){e=new A(!1),n=f(),e.a=n},m(t,i){e.m(r,t,i),s(t,n,i)},p(t,n){16&n&&r!==(r=t[6](t[4])+"")&&e.p(r)},d(t){t&&l(n),t&&e.d()}}}function Dn(t){let e,n,i,a;return{c(){e=d("span"),n=u(t[0]),g(e,"autofocus",""),g(e,"contenteditable","true"),g(e,"class","comment svelte-jszitz"),void 0===t[0]&&O((()=>t[14].call(e)))},m(r,l){s(r,e,l),o(e,n),void 0!==t[0]&&(e.textContent=t[0]),e.focus(),i||(a=[p(e,"focusout",t[7]),p(e,"input",t[14])],i=!0)},p(t,r){1&r&&_(n,t[0]),1&r&&t[0]!==e.textContent&&(e.textContent=t[0])},d(t){t&&l(e),i=!1,r(a)}}}function Rn(e){let n,i,a,c;function u(t,e){return t[0]||""==t[0]?Dn:zn}let h=u(e),f=h(e);return{c(){n=d("div"),i=d("div"),f.c(),g(i,"class","line svelte-jszitz"),g(n,"class","viewer svelte-jszitz"),y(n,"font-family",e[2].font)},m(t,r){s(t,n,r),o(n,i),f.m(i,null),a||(c=[p(i,"mousedown",e[15]),p(i,"contextmenu",m(e[13])),p(n,"contextmenu",m(e[12]))],a=!0)},p(t,[e]){h===(h=u(t))&&f?f.p(t,e):(f.d(1),f=h(t),f&&(f.c(),f.m(i,null))),4&e&&y(n,"font-family",t[2].font)},i:t,o:t,d(t){t&&l(n),f.d(),a=!1,r(c)}}}function Un(t,e,n){let r=N(),{index:i}=e,{comment:a}=e,{prevLine:o}=e,{line:s}=e,{passedNext:l}=e,c=new cn(s.chords),d=c,{sameTranspositionAsPrevious:u=!1}=e,{settings:h}=e;function f(t,e,n=" "){let r=t.notes.length>1&&t.notes.find((t=>!0===t.valid));!1===h.oors&&t.notes.filter((t=>!1===t.outOfRange)).length<=1&&(r=!1);let i=t.notes.filter((t=>!1===t.outOfRange)),a=t.notes.filter((t=>!0===t.outOfRange&&t.displayValue===t.value-1024)),o=t.notes.filter((t=>!0===t.outOfRange&&t.displayValue===t.value+1024)),s=`<span style="color:${e};">`,l="";r&&(s+="[",l+="[");for(const e of t.notes)if(e.valid)if(!0===e.outOfRange){if(!0===h.oors){const t=e===a[0],n=e===a[a.length-1],c=!r&&e===o[0],d=r&&0===i.length&&0===a.length&&e===o[0],u=r&&i.length>0&&e===o[0];(t||c||d||u)&&(l+=h.oorSeparator),s+=`<span style="display:inline-flex; justify-content: center; min-width: 10px; border-bottom: 2px solid; font-weight: 900">${e.char}</span>`,l+=`${e.char}${n&&i.length>0?"'":""}`}}else s+=e.char,l+=`${e.char}`;else s+="_",l+="_";return r&&(s+="]",l+="]"),s+="</span>",{dom:s,text:l}}return t.$$set=t=>{"index"in t&&n(1,i=t.index),"comment"in t&&n(0,a=t.comment),"prevLine"in t&&n(9,o=t.prevLine),"line"in t&&n(8,s=t.line),"passedNext"in t&&n(10,l=t.passedNext),"sameTranspositionAsPrevious"in t&&n(11,u=t.sameTranspositionAsPrevious),"settings"in t&&n(2,h=t.settings)},t.$$.update=()=>{268&t.$$.dirty&&(n(8,s.originalSheet=n(3,c=new cn(s.chords)),s),n(4,d=c.transpose(s.transposition,h.pShifts,h.pOors,h.classicChordOrder,h.sequentialQuantize)))},[a,i,h,c,d,r,function(t){const e=-s.transposition;let n="",i="";if(o?.comment&&(i+=o.comment+"\n"),!u){let t=`Transpose by: ${e>0?"+":""}${e}`;s.difference&&(t+=` (${-s.difference>0?"+":""}${-s.difference})`),n+=In(t+"\n","white"),i+=t+"\n"}let a=t.chords;for(let t=0;t<a.length;t++){if(!a){n+="[bad-midi-file!]<br>",i+="[bad-midi-file!]";continue}const e={chord:a[t]};e.note=e.chord?.notes[0];const r={chord:a[t+1]};if(r.note=r.chord?.notes[0],!e.note)continue;if(!r.note){if(!l){let t=f(e.chord,"white");n+=t.dom,i+=t.text;continue}r.note=l}let o=e.note.tempo/1e3,s=r.note.playTime-e.note.playTime;e.chord.is_quantized&&(s=r.note.playTime-e.chord.notes.slice(-1)[0].playTime),s-=.5;let c=Cn.long;s<o/16?c=Cn.sixtyfourth:s<o/8?c=Cn.thirtysecond:s<o/4?c=Cn.sixteenth:s<o/2?c=Cn.eighth:s<o?c=Cn.quarter:s<2*o?c=Cn.half:s<4*o?c=Cn.whole:s<8*o?c=Cn.quadruple:s<16*o&&(c=Cn.long);let d=f(e.chord,c);if(n+=d.dom,i+=d.text,h.tempoMarks){let t=pn(o,s);d=In(t,c),h.oors||e.chord.notes.some((t=>0==t.outOfRange))?(n+=d,i+=t):(n+=" ",i+=" ")}else n+=" ",i+=" "}return r("sheetText",i.trimEnd()),n},function(){r("comment",""==a||"<br>"==a?{action:"remove",index:+i}:{index:+i,action:"update",comment:a})},s,o,l,u,function(e){C.call(this,t,e)},function(e){C.call(this,t,e)},function(){a=this.textContent,n(0,a)},t=>{switch(t.button){case 0:if(a)return;t.ctrlKey?r("comment",{action:"add",index:+i}):r("transpose",{index:+i,by:1});break;case 1:r("auto",{index:+i,sheet:c,keepGoing:t.ctrlKey}),t.preventDefault();break;case 2:t.ctrlKey&&a?r("comment",{action:"remove",index:+i}):r("transpose",{index:+i,by:-1})}}]}Mn(".viewer.svelte-jszitz{display:block;white-space:pre-line;overflow-y:hidden;overflow-x:hidden;padding:0.1em;background:#2D2A32}.comment.svelte-jszitz{color:white\n    }.line.svelte-jszitz{all:unset}.line.svelte-jszitz:hover{filter:brightness(75%);cursor:pointer\n    }.line.svelte-jszitz:active{all:unset\n    }");class On extends et{constructor(t){super(),tt(this,t,Un,Rn,a,{index:1,comment:0,prevLine:9,line:8,passedNext:10,sameTranspositionAsPrevious:11,settings:2})}}
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function $n(t){let e=t.length;for(;--e>=0;)t[e]=0}const Fn=256,Ln=286,Pn=30,Vn=15,Bn=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Hn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Zn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qn=new Array(576);$n(qn);const Gn=new Array(60);$n(Gn);const Yn=new Array(512);$n(Yn);const Kn=new Array(256);$n(Kn);const Wn=new Array(29);$n(Wn);const Xn=new Array(Pn);function Qn(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let Jn,tr,er;function nr(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}$n(Xn);const rr=t=>t<256?Yn[t]:Yn[256+(t>>>7)],ir=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},ar=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,ir(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},or=(t,e,n)=>{ar(t,n[2*e],n[2*e+1])},sr=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},lr=(t,e,n)=>{const r=new Array(16);let i,a,o=0;for(i=1;i<=Vn;i++)o=o+n[i-1]<<1,r[i]=o;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=sr(r[e]++,e))}},cr=t=>{let e;for(e=0;e<Ln;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Pn;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},dr=t=>{t.bi_valid>8?ir(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},ur=(t,e,n,r)=>{const i=2*e,a=2*n;return t[i]<t[a]||t[i]===t[a]&&r[e]<=r[n]},hr=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&ur(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!ur(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},fr=(t,e,n)=>{let r,i,a,o,s=0;if(0!==t.sym_next)do{r=255&t.pending_buf[t.sym_buf+s++],r+=(255&t.pending_buf[t.sym_buf+s++])<<8,i=t.pending_buf[t.sym_buf+s++],0===r?or(t,i,e):(a=Kn[i],or(t,a+Fn+1,e),o=Bn[a],0!==o&&(i-=Wn[a],ar(t,i,o)),r--,a=rr(r),or(t,a,n),o=Hn[a],0!==o&&(r-=Xn[a],ar(t,r,o)))}while(s<t.sym_next);or(t,256,e)},pr=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems;let o,s,l,c=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<a;o++)0!==n[2*o]?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):n[2*o+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=r[2*l+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)hr(t,n,o);l=a;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],hr(t,n,1),s=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=s,n[2*l]=n[2*o]+n[2*s],t.depth[l]=(t.depth[o]>=t.depth[s]?t.depth[o]:t.depth[s])+1,n[2*o+1]=n[2*s+1]=l,t.heap[1]=l++,hr(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,d,u,h,f,p,m=0;for(h=0;h<=Vn;h++)t.bl_count[h]=0;for(n[2*t.heap[t.heap_max]+1]=0,c=t.heap_max+1;c<573;c++)d=t.heap[c],h=n[2*n[2*d+1]+1]+1,h>l&&(h=l,m++),n[2*d+1]=h,d>r||(t.bl_count[h]++,f=0,d>=s&&(f=o[d-s]),p=n[2*d],t.opt_len+=p*(h+f),a&&(t.static_len+=p*(i[2*d+1]+f)));if(0!==m){do{for(h=l-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[l]--,m-=2}while(m>0);for(h=l;0!==h;h--)for(d=t.bl_count[h];0!==d;)u=t.heap[--c],u>r||(n[2*u+1]!==h&&(t.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(t,e),lr(n,c,t.bl_count)},mr=(t,e,n)=>{let r,i,a=-1,o=e[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++s<l&&i===o||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))},gr=(t,e,n)=>{let r,i,a=-1,o=e[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++s<l&&i===o)){if(s<c)do{or(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(or(t,i,t.bl_tree),s--),or(t,16,t.bl_tree),ar(t,s-3,2)):s<=10?(or(t,17,t.bl_tree),ar(t,s-3,3)):(or(t,18,t.bl_tree),ar(t,s-11,7));s=0,a=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}};let wr=!1;const _r=(t,e,n,r)=>{ar(t,0+(r?1:0),3),dr(t),ir(t,n),ir(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};var br=(t,e,n,r)=>{let i,a,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<Fn;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),pr(t,t.l_desc),pr(t,t.d_desc),o=(t=>{let e;for(mr(t,t.dyn_ltree,t.l_desc.max_code),mr(t,t.dyn_dtree,t.d_desc.max_code),pr(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Zn[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==e?_r(t,e,n,r):4===t.strategy||a===i?(ar(t,2+(r?1:0),3),fr(t,qn,Gn)):(ar(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(ar(t,e-257,5),ar(t,n-1,5),ar(t,r-4,4),i=0;i<r;i++)ar(t,t.bl_tree[2*Zn[i]+1],3);gr(t,t.dyn_ltree,e-1),gr(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),fr(t,t.dyn_ltree,t.dyn_dtree)),cr(t),r&&dr(t)},yr={_tr_init:t=>{wr||((()=>{let t,e,n,r,i;const a=new Array(16);for(n=0,r=0;r<28;r++)for(Wn[r]=n,t=0;t<1<<Bn[r];t++)Kn[n++]=r;for(Kn[n-1]=r,i=0,r=0;r<16;r++)for(Xn[r]=i,t=0;t<1<<Hn[r];t++)Yn[i++]=r;for(i>>=7;r<Pn;r++)for(Xn[r]=i<<7,t=0;t<1<<Hn[r]-7;t++)Yn[256+i++]=r;for(e=0;e<=Vn;e++)a[e]=0;for(t=0;t<=143;)qn[2*t+1]=8,t++,a[8]++;for(;t<=255;)qn[2*t+1]=9,t++,a[9]++;for(;t<=279;)qn[2*t+1]=7,t++,a[7]++;for(;t<=287;)qn[2*t+1]=8,t++,a[8]++;for(lr(qn,287,a),t=0;t<Pn;t++)Gn[2*t+1]=5,Gn[2*t]=sr(t,5);Jn=new Qn(qn,Bn,257,Ln,Vn),tr=new Qn(Gn,Hn,0,Pn,Vn),er=new Qn(new Array(0),jn,0,19,7)})(),wr=!0),t.l_desc=new nr(t.dyn_ltree,Jn),t.d_desc=new nr(t.dyn_dtree,tr),t.bl_desc=new nr(t.bl_tree,er),t.bi_buf=0,t.bi_valid=0,cr(t)},_tr_stored_block:_r,_tr_flush_block:br,_tr_tally:(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(Kn[n]+Fn+1)]++,t.dyn_dtree[2*rr(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{ar(t,2,3),or(t,256,qn),(t=>{16===t.bi_valid?(ir(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var vr=(t,e,n,r)=>{let i=65535&t|0,a=t>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+e[r++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16|0};const Er=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var xr=(t,e,n,r)=>{const i=Er,a=r+n;t^=-1;for(let n=r;n<a;n++)t=t>>>8^i[255&(t^e[n])];return-1^t},kr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Tr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ar,_tr_stored_block:Sr,_tr_flush_block:Nr,_tr_tally:Cr,_tr_align:Ir}=yr,{Z_NO_FLUSH:Mr,Z_PARTIAL_FLUSH:zr,Z_FULL_FLUSH:Dr,Z_FINISH:Rr,Z_BLOCK:Ur,Z_OK:Or,Z_STREAM_END:$r,Z_STREAM_ERROR:Fr,Z_DATA_ERROR:Lr,Z_BUF_ERROR:Pr,Z_DEFAULT_COMPRESSION:Vr,Z_FILTERED:Br,Z_HUFFMAN_ONLY:Hr,Z_RLE:jr,Z_FIXED:Zr,Z_DEFAULT_STRATEGY:qr,Z_UNKNOWN:Gr,Z_DEFLATED:Yr}=Tr,Kr=286,Wr=30,Xr=19,Qr=2*Kr+1,Jr=15,ti=258,ei=262,ni=42,ri=113,ii=666,ai=(t,e)=>(t.msg=kr[e],e),oi=t=>2*t-(t>4?9:0),si=t=>{let e=t.length;for(;--e>=0;)t[e]=0},li=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do{n=t.head[--r],t.head[r]=n>=i?n-i:0}while(--e);e=i,r=e;do{n=t.prev[--r],t.prev[r]=n>=i?n-i:0}while(--e)};let ci=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const di=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},ui=(t,e)=>{Nr(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,di(t.strm)},hi=(t,e)=>{t.pending_buf[t.pending++]=e},fi=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},pi=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=vr(t.adler,e,i,n):2===t.state.wrap&&(t.adler=xr(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},mi=(t,e)=>{let n,r,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match;const l=t.strstart>t.w_size-ei?t.strstart-(t.w_size-ei):0,c=t.window,d=t.w_mask,u=t.prev,h=t.strstart+ti;let f=c[a+o-1],p=c[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(n=e,c[n+o]===p&&c[n+o-1]===f&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<h);if(r=ti-(h-a),a=h-ti,r>o){if(t.match_start=e,o=r,r>=s)break;f=c[a+o-1],p=c[a+o]}}}while((e=u[e&d])>l&&0!=--i);return o<=t.lookahead?o:t.lookahead},gi=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ei)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),li(t),r+=e),0===t.strm.avail_in)break;if(n=pi(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=ci(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=ci(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ei&&0!==t.strm.avail_in)},wi=(t,e)=>{let n,r,i,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,s=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,r=t.strstart-t.block_start,n>r+t.strm.avail_in&&(n=r+t.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&e!==Rr||e===Mr||n!==r+t.strm.avail_in))break;o=e===Rr&&n===r+t.strm.avail_in?1:0,Sr(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,di(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(pi(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===o);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==Mr&&e!==Rr&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(pi(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,a=i>t.w_size?t.w_size:i,r=t.strstart-t.block_start,(r>=a||(r||e===Rr)&&e!==Mr&&0===t.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=e===Rr&&0===t.strm.avail_in&&n===r?1:0,Sr(t,t.block_start,n,o),t.block_start+=n,di(t.strm)),o?3:1)},_i=(t,e)=>{let n,r;for(;;){if(t.lookahead<ei){if(gi(t),t.lookahead<ei&&e===Mr)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=ci(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-ei&&(t.match_length=mi(t,n)),t.match_length>=3)if(r=Cr(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ci(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ci(t,t.ins_h,t.window[t.strstart+1]);else r=Cr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(ui(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Rr?(ui(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ui(t,!1),0===t.strm.avail_out)?1:2},bi=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<ei){if(gi(t),t.lookahead<ei&&e===Mr)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=ci(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-ei&&(t.match_length=mi(t,n),t.match_length<=5&&(t.strategy===Br||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=Cr(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=ci(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(ui(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=Cr(t,0,t.window[t.strstart-1]),r&&ui(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Cr(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Rr?(ui(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ui(t,!1),0===t.strm.avail_out)?1:2};function yi(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const vi=[new yi(0,0,0,0,wi),new yi(4,4,8,4,_i),new yi(4,5,16,8,_i),new yi(4,6,32,32,_i),new yi(4,4,16,16,bi),new yi(8,16,32,32,bi),new yi(8,16,128,128,bi),new yi(8,32,128,256,bi),new yi(32,128,258,1024,bi),new yi(32,258,258,4096,bi)];function Ei(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Yr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*Qr),this.dyn_dtree=new Uint16Array(2*(2*Wr+1)),this.bl_tree=new Uint16Array(2*(2*Xr+1)),si(this.dyn_ltree),si(this.dyn_dtree),si(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Jr+1),this.heap=new Uint16Array(2*Kr+1),si(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Kr+1),si(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const xi=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==ni&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==ri&&e.status!==ii?1:0},ki=t=>{if(xi(t))return ai(t,Fr);t.total_in=t.total_out=0,t.data_type=Gr;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?ni:ri,t.adler=2===e.wrap?0:1,e.last_flush=-2,Ar(e),Or},Ti=t=>{const e=ki(t);var n;return e===Or&&((n=t.state).window_size=2*n.w_size,si(n.head),n.max_lazy_match=vi[n.level].max_lazy,n.good_match=vi[n.level].good_length,n.nice_match=vi[n.level].nice_length,n.max_chain_length=vi[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},Ai=(t,e,n,r,i,a)=>{if(!t)return Fr;let o=1;if(e===Vr&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==Yr||r<8||r>15||e<0||e>9||a<0||a>Zr||8===r&&1!==o)return ai(t,Fr);8===r&&(r=9);const s=new Ei;return t.state=s,s.strm=t,s.status=ni,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=e,s.strategy=a,s.method=n,Ti(t)};var Si=(t,e)=>{if(xi(t)||e>Ur||e<0)return t?ai(t,Fr):Fr;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===ii&&e!==Rr)return ai(t,0===t.avail_out?Pr:Fr);const r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(di(t),0===t.avail_out)return n.last_flush=-1,Or}else if(0===t.avail_in&&oi(e)<=oi(r)&&e!==Rr)return ai(t,Pr);if(n.status===ii&&0!==t.avail_in)return ai(t,Pr);if(n.status===ni&&0===n.wrap&&(n.status=ri),n.status===ni){let e=Yr+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Hr||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,fi(n,e),0!==n.strstart&&(fi(n,t.adler>>>16),fi(n,65535&t.adler)),t.adler=1,n.status=ri,di(t),0!==n.pending)return n.last_flush=-1,Or}if(57===n.status)if(t.adler=0,hi(n,31),hi(n,139),hi(n,8),n.gzhead)hi(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),hi(n,255&n.gzhead.time),hi(n,n.gzhead.time>>8&255),hi(n,n.gzhead.time>>16&255),hi(n,n.gzhead.time>>24&255),hi(n,9===n.level?2:n.strategy>=Hr||n.level<2?4:0),hi(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(hi(n,255&n.gzhead.extra.length),hi(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=xr(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(hi(n,0),hi(n,0),hi(n,0),hi(n,0),hi(n,0),hi(n,9===n.level?2:n.strategy>=Hr||n.level<2?4:0),hi(n,3),n.status=ri,di(t),0!==n.pending)return n.last_flush=-1,Or;if(69===n.status){if(n.gzhead.extra){let e=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=xr(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=i,di(t),0!==n.pending)return n.last_flush=-1,Or;e=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>e&&(t.adler=xr(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=xr(t.adler,n.pending_buf,n.pending-r,r)),di(t),0!==n.pending)return n.last_flush=-1,Or;r=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,hi(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=xr(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=xr(t.adler,n.pending_buf,n.pending-r,r)),di(t),0!==n.pending)return n.last_flush=-1,Or;r=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,hi(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=xr(t.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(di(t),0!==n.pending))return n.last_flush=-1,Or;hi(n,255&t.adler),hi(n,t.adler>>8&255),t.adler=0}if(n.status=ri,di(t),0!==n.pending)return n.last_flush=-1,Or}if(0!==t.avail_in||0!==n.lookahead||e!==Mr&&n.status!==ii){let r=0===n.level?wi(n,e):n.strategy===Hr?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(gi(t),0===t.lookahead)){if(e===Mr)return 1;break}if(t.match_length=0,n=Cr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(ui(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Rr?(ui(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ui(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===jr?((t,e)=>{let n,r,i,a;const o=t.window;for(;;){if(t.lookahead<=ti){if(gi(t),t.lookahead<=ti&&e===Mr)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=t.strstart+ti;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);t.match_length=ti-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=Cr(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Cr(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(ui(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Rr?(ui(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ui(t,!1),0===t.strm.avail_out)?1:2})(n,e):vi[n.level].func(n,e);if(3!==r&&4!==r||(n.status=ii),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),Or;if(2===r&&(e===zr?Ir(n):e!==Ur&&(Sr(n,0,0,!1),e===Dr&&(si(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),di(t),0===t.avail_out))return n.last_flush=-1,Or}return e!==Rr?Or:n.wrap<=0?$r:(2===n.wrap?(hi(n,255&t.adler),hi(n,t.adler>>8&255),hi(n,t.adler>>16&255),hi(n,t.adler>>24&255),hi(n,255&t.total_in),hi(n,t.total_in>>8&255),hi(n,t.total_in>>16&255),hi(n,t.total_in>>24&255)):(fi(n,t.adler>>>16),fi(n,65535&t.adler)),di(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Or:$r)},Ni={deflateInit:(t,e)=>Ai(t,e,Yr,15,8,qr),deflateInit2:Ai,deflateReset:Ti,deflateResetKeep:ki,deflateSetHeader:(t,e)=>xi(t)||2!==t.state.wrap?Fr:(t.state.gzhead=e,Or),deflate:Si,deflateEnd:t=>{if(xi(t))return Fr;const e=t.state.status;return t.state=null,e===ri?ai(t,Lr):Or},deflateSetDictionary:(t,e)=>{let n=e.length;if(xi(t))return Fr;const r=t.state,i=r.wrap;if(2===i||1===i&&r.status!==ni||r.lookahead)return Fr;if(1===i&&(t.adler=vr(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(si(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const a=t.avail_in,o=t.next_in,s=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,gi(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=ci(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,gi(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=s,t.avail_in=a,r.wrap=i,Or},deflateInfo:"pako deflate (from Nodeca project)"};const Ci=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Ii={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Ci(n,e)&&(t[e]=n[e])}}return t},flattenChunks:t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,r=0,i=t.length;e<i;e++){let i=t[e];n.set(i,r),r+=i.length}return n}};let Mi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Mi=!1}const zi=new Uint8Array(256);for(let t=0;t<256;t++)zi[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;zi[254]=zi[254]=1;var Di={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,a,o=t.length,s=0;for(i=0;i<o;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(s),a=0,i=0;a<s;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},buf2string:(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let e=t[r++];if(e<128){a[i++]=e;continue}let o=zi[e];if(o>4)a[i++]=65533,r+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&r<n;)e=e<<6|63&t[r++],o--;o>1?a[i++]=65533:e<65536?a[i++]=e:(e-=65536,a[i++]=55296|e>>10&1023,a[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Mi)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n})(a,i)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+zi[t[n]]>e?n:e}};var Ri=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ui=Object.prototype.toString,{Z_NO_FLUSH:Oi,Z_SYNC_FLUSH:$i,Z_FULL_FLUSH:Fi,Z_FINISH:Li,Z_OK:Pi,Z_STREAM_END:Vi,Z_DEFAULT_COMPRESSION:Bi,Z_DEFAULT_STRATEGY:Hi,Z_DEFLATED:ji}=Tr;function Zi(t){this.options=Ii.assign({level:Bi,method:ji,chunkSize:16384,windowBits:15,memLevel:8,strategy:Hi},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ri,this.strm.avail_out=0;let n=Ni.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Pi)throw new Error(kr[n]);if(e.header&&Ni.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Di.string2buf(e.dictionary):"[object ArrayBuffer]"===Ui.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Ni.deflateSetDictionary(this.strm,t),n!==Pi)throw new Error(kr[n]);this._dict_set=!0}}function qi(t,e){const n=new Zi(e);if(n.push(t,!0),n.err)throw n.msg||kr[n.err];return n.result}Zi.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?Li:Oi,"string"==typeof t?n.input=Di.string2buf(t):"[object ArrayBuffer]"===Ui.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===$i||a===Fi)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Ni.deflate(n,a),i===Vi)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Ni.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Pi;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Zi.prototype.onData=function(t){this.chunks.push(t)},Zi.prototype.onEnd=function(t){t===Pi&&(this.result=Ii.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Gi={Deflate:Zi,deflate:qi,deflateRaw:function(t,e){return(e=e||{}).raw=!0,qi(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,qi(t,e)},constants:Tr};const Yi=16209;var Ki=function(t,e){let n,r,i,a,o,s,l,c,d,u,h,f,p,m,g,w,_,b,y,v,E,x,k,T;const A=t.state;n=t.next_in,k=t.input,r=n+(t.avail_in-5),i=t.next_out,T=t.output,a=i-(e-t.avail_out),o=i+(t.avail_out-257),s=A.dmax,l=A.wsize,c=A.whave,d=A.wnext,u=A.window,h=A.hold,f=A.bits,p=A.lencode,m=A.distcode,g=(1<<A.lenbits)-1,w=(1<<A.distbits)-1;t:do{f<15&&(h+=k[n++]<<f,f+=8,h+=k[n++]<<f,f+=8),_=p[h&g];e:for(;;){if(b=_>>>24,h>>>=b,f-=b,b=_>>>16&255,0===b)T[i++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=p[(65535&_)+(h&(1<<b)-1)];continue e}if(32&b){A.mode=16191;break t}t.msg="invalid literal/length code",A.mode=Yi;break t}y=65535&_,b&=15,b&&(f<b&&(h+=k[n++]<<f,f+=8),y+=h&(1<<b)-1,h>>>=b,f-=b),f<15&&(h+=k[n++]<<f,f+=8,h+=k[n++]<<f,f+=8),_=m[h&w];n:for(;;){if(b=_>>>24,h>>>=b,f-=b,b=_>>>16&255,!(16&b)){if(0==(64&b)){_=m[(65535&_)+(h&(1<<b)-1)];continue n}t.msg="invalid distance code",A.mode=Yi;break t}if(v=65535&_,b&=15,f<b&&(h+=k[n++]<<f,f+=8,f<b&&(h+=k[n++]<<f,f+=8)),v+=h&(1<<b)-1,v>s){t.msg="invalid distance too far back",A.mode=Yi;break t}if(h>>>=b,f-=b,b=i-a,v>b){if(b=v-b,b>c&&A.sane){t.msg="invalid distance too far back",A.mode=Yi;break t}if(E=0,x=u,0===d){if(E+=l-b,b<y){y-=b;do{T[i++]=u[E++]}while(--b);E=i-v,x=T}}else if(d<b){if(E+=l+d-b,b-=d,b<y){y-=b;do{T[i++]=u[E++]}while(--b);if(E=0,d<y){b=d,y-=b;do{T[i++]=u[E++]}while(--b);E=i-v,x=T}}}else if(E+=d-b,b<y){y-=b;do{T[i++]=u[E++]}while(--b);E=i-v,x=T}for(;y>2;)T[i++]=x[E++],T[i++]=x[E++],T[i++]=x[E++],y-=3;y&&(T[i++]=x[E++],y>1&&(T[i++]=x[E++]))}else{E=i-v;do{T[i++]=T[E++],T[i++]=T[E++],T[i++]=T[E++],y-=3}while(y>2);y&&(T[i++]=T[E++],y>1&&(T[i++]=T[E++]))}break}}break}}while(n<r&&i<o);y=f>>3,n-=y,f-=y<<3,h&=(1<<f)-1,t.next_in=n,t.next_out=i,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=i<o?o-i+257:257-(i-o),A.hold=h,A.bits=f};const Wi=15,Xi=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Qi=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ji=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ta=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ea=(t,e,n,r,i,a,o,s)=>{const l=s.bits;let c,d,u,h,f,p,m=0,g=0,w=0,_=0,b=0,y=0,v=0,E=0,x=0,k=0,T=null;const A=new Uint16Array(16),S=new Uint16Array(16);let N,C,I,M=null;for(m=0;m<=Wi;m++)A[m]=0;for(g=0;g<r;g++)A[e[n+g]]++;for(b=l,_=Wi;_>=1&&0===A[_];_--);if(b>_&&(b=_),0===_)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(w=1;w<_&&0===A[w];w++);for(b<w&&(b=w),E=1,m=1;m<=Wi;m++)if(E<<=1,E-=A[m],E<0)return-1;if(E>0&&(0===t||1!==_))return-1;for(S[1]=0,m=1;m<Wi;m++)S[m+1]=S[m]+A[m];for(g=0;g<r;g++)0!==e[n+g]&&(o[S[e[n+g]]++]=g);if(0===t?(T=M=o,p=20):1===t?(T=Xi,M=Qi,p=257):(T=Ji,M=ta,p=0),k=0,g=0,m=w,f=a,y=b,v=0,u=-1,x=1<<b,h=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){N=m-v,o[g]+1<p?(C=0,I=o[g]):o[g]>=p?(C=M[o[g]-p],I=T[o[g]-p]):(C=96,I=0),c=1<<m-v,d=1<<y,w=d;do{d-=c,i[f+(k>>v)+d]=N<<24|C<<16|I|0}while(0!==d);for(c=1<<m-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,g++,0==--A[m]){if(m===_)break;m=e[n+o[g]]}if(m>b&&(k&h)!==u){for(0===v&&(v=b),f+=w,y=m-v,E=1<<y;y+v<_&&(E-=A[y+v],!(E<=0));)y++,E<<=1;if(x+=1<<y,1===t&&x>852||2===t&&x>592)return 1;u=k&h,i[u]=b<<24|y<<16|f-a|0}}return 0!==k&&(i[f+k]=m-v<<24|64<<16|0),s.bits=b,0};const{Z_FINISH:na,Z_BLOCK:ra,Z_TREES:ia,Z_OK:aa,Z_STREAM_END:oa,Z_NEED_DICT:sa,Z_STREAM_ERROR:la,Z_DATA_ERROR:ca,Z_MEM_ERROR:da,Z_BUF_ERROR:ua,Z_DEFLATED:ha}=Tr,fa=16180,pa=16190,ma=16191,ga=16192,wa=16194,_a=16199,ba=16200,ya=16206,va=16209,Ea=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function xa(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ka=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<fa||e.mode>16211?1:0},Ta=t=>{if(ka(t))return la;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=fa,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,aa},Aa=t=>{if(ka(t))return la;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ta(t)},Sa=(t,e)=>{let n;if(ka(t))return la;const r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?la:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Aa(t))},Na=(t,e)=>{if(!t)return la;const n=new xa;t.state=n,n.strm=t,n.window=null,n.mode=fa;const r=Sa(t,e);return r!==aa&&(t.state=null),r};let Ca,Ia,Ma=!0;const za=t=>{if(Ma){Ca=new Int32Array(512),Ia=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ea(1,t.lens,0,288,Ca,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ea(2,t.lens,0,32,Ia,0,t.work,{bits:5}),Ma=!1}t.lencode=Ca,t.lenbits=9,t.distcode=Ia,t.distbits=5},Da=(t,e,n,r)=>{let i;const a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(e.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Ra=(t,e)=>{let n,r,i,a,o,s,l,c,d,u,h,f,p,m,g,w,_,b,y,v,E,x,k=0;const T=new Uint8Array(4);let A,S;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ka(t)||!t.output||!t.input&&0!==t.avail_in)return la;n=t.state,n.mode===ma&&(n.mode=ga),o=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,s=t.avail_in,c=n.hold,d=n.bits,u=s,h=l,x=aa;t:for(;;)switch(n.mode){case fa:if(0===n.wrap){n.mode=ga;break}for(;d<16;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=xr(n.check,T,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=va;break}if((15&c)!==ha){t.msg="unknown compression method",n.mode=va;break}if(c>>>=4,d-=4,E=8+(15&c),0===n.wbits&&(n.wbits=E),E>15||E>n.wbits){t.msg="invalid window size",n.mode=va;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&c?16189:ma,c=0,d=0;break;case 16181:for(;d<16;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==ha){t.msg="unknown compression method",n.mode=va;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=va;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=xr(n.check,T,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=xr(n.check,T,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=xr(n.check,T,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=xr(n.check,T,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>s&&(f=s),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+f),E)),512&n.flags&&4&n.wrap&&(n.check=xr(n.check,r,f,a)),s-=f,a+=f,n.length-=f),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break t;f=0;do{E=r[a+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=xr(n.check,r,f,a)),s-=f,a+=f,E)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break t;f=0;do{E=r[a+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=xr(n.check,r,f,a)),s-=f,a+=f,E)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=va;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=ma;break;case 16189:for(;d<32;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}t.adler=n.check=Ea(c),c=0,d=0,n.mode=pa;case pa:if(0===n.havedict)return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=c,n.bits=d,sa;t.adler=n.check=1,n.mode=ma;case ma:if(e===ra||e===ia)break t;case ga:if(n.last){c>>>=7&d,d-=7&d,n.mode=ya;break}for(;d<3;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=16193;break;case 1:if(za(n),n.mode=_a,e===ia){c>>>=2,d-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=va}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=va;break}if(n.length=65535&c,c=0,d=0,n.mode=wa,e===ia)break t;case wa:n.mode=16195;case 16195:if(f=n.length,f){if(f>s&&(f=s),f>l&&(f=l),0===f)break t;i.set(r.subarray(a,a+f),o),s-=f,a+=f,l-=f,o+=f,n.length-=f;break}n.mode=ma;break;case 16196:for(;d<14;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=va;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}n.lens[N[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},x=ea(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,x){t.msg="invalid code lengths set",n.mode=va;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,w=k>>>16&255,_=65535&k,!(g<=d);){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(_<16)c>>>=g,d-=g,n.lens[n.have++]=_;else{if(16===_){for(S=g+2;d<S;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(c>>>=g,d-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=va;break}E=n.lens[n.have-1],f=3+(3&c),c>>>=2,d-=2}else if(17===_){for(S=g+3;d<S;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}c>>>=g,d-=g,E=0,f=3+(7&c),c>>>=3,d-=3}else{for(S=g+7;d<S;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}c>>>=g,d-=g,E=0,f=11+(127&c),c>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=va;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===va)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=va;break}if(n.lenbits=9,A={bits:n.lenbits},x=ea(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,x){t.msg="invalid literal/lengths set",n.mode=va;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},x=ea(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,x){t.msg="invalid distances set",n.mode=va;break}if(n.mode=_a,e===ia)break t;case _a:n.mode=ba;case ba:if(s>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=c,n.bits=d,Ki(t,h),o=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,s=t.avail_in,c=n.hold,d=n.bits,n.mode===ma&&(n.back=-1);break}for(n.back=0;k=n.lencode[c&(1<<n.lenbits)-1],g=k>>>24,w=k>>>16&255,_=65535&k,!(g<=d);){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(w&&0==(240&w)){for(b=g,y=w,v=_;k=n.lencode[v+((c&(1<<b+y)-1)>>b)],g=k>>>24,w=k>>>16&255,_=65535&k,!(b+g<=d);){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=g,d-=g,n.back+=g,n.length=_,0===w){n.mode=16205;break}if(32&w){n.back=-1,n.mode=ma;break}if(64&w){t.msg="invalid literal/length code",n.mode=va;break}n.extra=15&w,n.mode=16201;case 16201:if(n.extra){for(S=n.extra;d<S;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;k=n.distcode[c&(1<<n.distbits)-1],g=k>>>24,w=k>>>16&255,_=65535&k,!(g<=d);){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(0==(240&w)){for(b=g,y=w,v=_;k=n.distcode[v+((c&(1<<b+y)-1)>>b)],g=k>>>24,w=k>>>16&255,_=65535&k,!(b+g<=d);){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=g,d-=g,n.back+=g,64&w){t.msg="invalid distance code",n.mode=va;break}n.offset=_,n.extra=15&w,n.mode=16203;case 16203:if(n.extra){for(S=n.extra;d<S;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=va;break}n.mode=16204;case 16204:if(0===l)break t;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=va;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,p=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{i[o++]=m[p++]}while(--f);0===n.length&&(n.mode=ba);break;case 16205:if(0===l)break t;i[o++]=n.length,l--,n.mode=ba;break;case ya:if(n.wrap){for(;d<32;){if(0===s)break t;s--,c|=r[a++]<<d,d+=8}if(h-=l,t.total_out+=h,n.total+=h,4&n.wrap&&h&&(t.adler=n.check=n.flags?xr(n.check,i,h,o-h):vr(n.check,i,h,o-h)),h=l,4&n.wrap&&(n.flags?c:Ea(c))!==n.check){t.msg="incorrect data check",n.mode=va;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break t;s--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=va;break}c=0,d=0}n.mode=16208;case 16208:x=oa;break t;case va:x=ca;break t;case 16210:return da;default:return la}return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,n.hold=c,n.bits=d,(n.wsize||h!==t.avail_out&&n.mode<va&&(n.mode<ya||e!==na))&&Da(t,t.output,t.next_out,h-t.avail_out),u-=t.avail_in,h-=t.avail_out,t.total_in+=u,t.total_out+=h,n.total+=h,4&n.wrap&&h&&(t.adler=n.check=n.flags?xr(n.check,i,h,t.next_out-h):vr(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===ma?128:0)+(n.mode===_a||n.mode===wa?256:0),(0===u&&0===h||e===na)&&x===aa&&(x=ua),x},Ua={inflateReset:Aa,inflateReset2:Sa,inflateResetKeep:Ta,inflateInit:t=>Na(t,15),inflateInit2:Na,inflate:Ra,inflateEnd:t=>{if(ka(t))return la;let e=t.state;return e.window&&(e.window=null),t.state=null,aa},inflateGetHeader:(t,e)=>{if(ka(t))return la;const n=t.state;return 0==(2&n.wrap)?la:(n.head=e,e.done=!1,aa)},inflateSetDictionary:(t,e)=>{const n=e.length;let r,i,a;return ka(t)?la:(r=t.state,0!==r.wrap&&r.mode!==pa?la:r.mode===pa&&(i=1,i=vr(i,e,n,0),i!==r.check)?ca:(a=Da(t,e,n,n),a?(r.mode=16210,da):(r.havedict=1,aa)))},inflateInfo:"pako inflate (from Nodeca project)"};var Oa=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const $a=Object.prototype.toString,{Z_NO_FLUSH:Fa,Z_FINISH:La,Z_OK:Pa,Z_STREAM_END:Va,Z_NEED_DICT:Ba,Z_STREAM_ERROR:Ha,Z_DATA_ERROR:ja,Z_MEM_ERROR:Za}=Tr;function qa(t){this.options=Ii.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ri,this.strm.avail_out=0;let n=Ua.inflateInit2(this.strm,e.windowBits);if(n!==Pa)throw new Error(kr[n]);if(this.header=new Oa,Ua.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Di.string2buf(e.dictionary):"[object ArrayBuffer]"===$a.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Ua.inflateSetDictionary(this.strm,e.dictionary),n!==Pa)))throw new Error(kr[n])}function Ga(t,e){const n=new qa(e);if(n.push(t),n.err)throw n.msg||kr[n.err];return n.result}qa.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=e===~~e?e:!0===e?La:Fa,"[object ArrayBuffer]"===$a.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Ua.inflate(n,o),a===Ba&&i&&(a=Ua.inflateSetDictionary(n,i),a===Pa?a=Ua.inflate(n,o):a===ja&&(a=Ba));n.avail_in>0&&a===Va&&n.state.wrap>0&&0!==t[n.next_in];)Ua.inflateReset(n),a=Ua.inflate(n,o);switch(a){case Ha:case ja:case Ba:case Za:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||a===Va))if("string"===this.options.to){let t=Di.utf8border(n.output,n.next_out),e=n.next_out-t,i=Di.buf2string(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==Pa||0!==s){if(a===Va)return a=Ua.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},qa.prototype.onData=function(t){this.chunks.push(t)},qa.prototype.onEnd=function(t){t===Pa&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ii.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ya={Inflate:qa,inflate:Ga,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Ga(t,e)},ungzip:Ga,constants:Tr};const{Deflate:Ka,deflate:Wa,deflateRaw:Xa,gzip:Qa}=Gi,{Inflate:Ja,inflate:to,inflateRaw:eo,ungzip:no}=Ya;var ro={Deflate:Ka,deflate:Wa,deflateRaw:Xa,gzip:Qa,Inflate:Ja,inflate:to,inflateRaw:eo,ungzip:no,constants:Tr};const io="pieces";async function ao(t){return ro.deflate(JSON.stringify(t))}function oo(t){return JSON.parse(ro.inflate(t,{to:"string"}))}function so(){var t;for(t in localStorage)if(localStorage.hasOwnProperty(t))return((localStorage[t].length+t.length)/1024).toFixed(2)}const lo={getAll:()=>{let t=JSON.parse(localStorage.getItem(io));return t||(t=[]),t},add:async(t,e,n)=>{let r=lo.getAll().filter((e=>e.name!=t));r.unshift(await async function(t,e,n){return{name:t,settings:e,updated:Date.now(),data:await ao(n)}}(t,e,n));try{localStorage.setItem(io,JSON.stringify(r))}catch({error:i,message:a}){"QuotaExceededError"==i||"The quota has been exceeded."==a?(console.log("Quota exceeded, dropping: ",r.pop()),r.shift(),localStorage.setItem(io,JSON.stringify(r)),lo.add(t,e,n)):console.error(i,a)}},delete:t=>{let e=lo.getAll().filter((e=>e.name!=t));localStorage.setItem(io,JSON.stringify(e))}};function co(t){const e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):"number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?new Date(t):new Date(NaN)}const uo=6048e5,ho=864e5,fo=6e4,po=36e5,mo=3600,go=60,wo=24*mo,_o=7*wo,bo=365.2425*wo,yo=bo/12,vo=3*yo;let Eo={};function xo(){return Eo}function ko(t,e){const n=xo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=co(t),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function To(t){const e=co(t);return e.setHours(0,0,0,0),e}function Ao(t){const e=co(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function So(t,e){const n=To(t),r=To(e),i=+n-Ao(n),a=+r-Ao(r);return Math.round((i-a)/ho)}function No(t,e){const n=co(t),r=co(e);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}function Co(t){const e=co(t);return Math.trunc(e.getMonth()/3)+1}function Io(t,e){const n=co(t),r=co(e);return 4*(n.getFullYear()-r.getFullYear())+(Co(n)-Co(r))}function Mo(t,e,n){const r=ko(t,n),i=ko(e,n),a=+r-Ao(r),o=+i-Ao(i);return Math.round((a-o)/uo)}function zo(t,e){const n=co(t),r=co(e);return n.getFullYear()-r.getFullYear()}function Do(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return 0===n?0:n}}function Ro(t,e){return+co(t)-+co(e)}function Uo(t,e,n){const r=Ro(t,e)/po;return Do(n?.roundingMethod)(r)}function Oo(t,e,n){const r=Ro(t,e)/fo;return Do(n?.roundingMethod)(r)}function $o(t,e,n){const r=Ro(t,e)/1e3;return Do(n?.roundingMethod)(r)}function Fo(t,e,n){let r,i=0;const a=co(t),o=co(e);if(n?.unit)r=n?.unit,"second"===r?i=$o(a,o):"minute"===r?i=Oo(a,o):"hour"===r?i=Uo(a,o):"day"===r?i=So(a,o):"week"===r?i=Mo(a,o):"month"===r?i=No(a,o):"quarter"===r?i=Io(a,o):"year"===r&&(i=zo(a,o));else{const t=$o(a,o);Math.abs(t)<go?(i=$o(a,o),r="second"):Math.abs(t)<mo?(i=Oo(a,o),r="minute"):Math.abs(t)<wo&&Math.abs(So(a,o))<1?(i=Uo(a,o),r="hour"):Math.abs(t)<_o&&(i=So(a,o))&&Math.abs(i)<7?r="day":Math.abs(t)<yo?(i=Mo(a,o),r="week"):Math.abs(t)<vo?(i=No(a,o),r="month"):Math.abs(t)<bo&&Io(a,o)<4?(i=Io(a,o),r="quarter"):(i=zo(a,o),r="year")}return new Intl.RelativeTimeFormat(n?.locale,{localeMatcher:n?.localeMatcher,numeric:n?.numeric||"auto",style:n?.style}).format(i,r)}function Lo(e){let n,i,a,c,f,w,b,v,E,x,k,T,A,S,N,C,I,M,z,D,R,U,O,$=e[0].name+"",F=e[0].name+"",L=Fo(e[0].updated,Date.now())+"",P=Math.round(11.2*Object.keys(e[0].data).length/1024)+"";return{c(){n=d("dialog"),i=d("form"),a=d("p"),c=u("Are you sure that you'd like to delete "),f=u($),w=u(" from your history?"),b=h(),v=d("div"),v.innerHTML='<button formmethod="dialog" class="p-1" value="cancel">Cancel</button> \n            <button formmethod="dialog" class="p-1" value="delete">Delete</button>',E=h(),x=d("button"),k=d("div"),T=u(F),A=h(),S=d("hr"),N=h(),C=d("div"),I=u(L),M=u(" - "),z=u(P),D=u(" kb"),g(a,"class","p-3 text-center"),g(v,"class","mx-2 mb-2 flex gap-2 w-full justify-center"),g(n,"class","rounded-lg overflow-hidden"),y(k,"white-space","nowrap"),y(k,"text-overflow","ellipsis"),y(k,"overflow","hidden"),y(S,"border-top","1px solid dimgrey",1),y(S,"width","100%"),g(S,"class","m-1"),g(C,"class","italic"),g(x,"title",R=e[0].name),g(x,"class","max-w-64 text-dimgrey justify-center align-middle text-nowrap text-ellipsis overflow-hidden"),y(x,"background","none",1),y(x,"border","1px solid dimgrey")},m(t,r){s(t,n,r),o(n,i),o(i,a),o(a,c),o(a,f),o(a,w),o(i,b),o(i,v),e[6](n),s(t,E,r),s(t,x,r),o(x,k),o(k,T),e[7](k),o(x,A),o(x,S),o(x,N),o(x,C),o(C,I),o(C,M),o(C,z),o(C,D),U||(O=[p(n,"close",e[5]),p(x,"click",e[3]),p(x,"contextmenu",m(e[4]))],U=!0)},p(t,[e]){1&e&&$!==($=t[0].name+"")&&_(f,$),1&e&&F!==(F=t[0].name+"")&&_(T,F),1&e&&L!==(L=Fo(t[0].updated,Date.now())+"")&&_(I,L),1&e&&P!==(P=Math.round(11.2*Object.keys(t[0].data).length/1024)+"")&&_(z,P),1&e&&R!==(R=t[0].name)&&g(x,"title",R)},i:t,o:t,d(t){t&&l(n),e[6](null),t&&l(E),t&&l(x),e[7](null),U=!1,r(O)}}}function Po(t,e,n){let r,i,a=N(),{piece:o}=e;return t.$$set=t=>{"piece"in t&&n(0,o=t.piece)},[o,r,i,()=>{a("load",{project:o})},()=>{i.showModal()},()=>{"delete"==i.returnValue&&(lo.delete(o.name),a("refresh"))},function(t){M[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},function(t){M[t?"unshift":"push"]((()=>{r=t,n(1,r)}))}]}class Vo extends et{constructor(t){super(),tt(this,t,Po,Lo,a,{piece:0})}}function Bo(t){let e;return{c(){e=u("Download Image")},m(t,n){s(t,e,n)},d(t){t&&l(e)}}}function Ho(t){let e;return{c(){e=u("Please Wait...")},m(t,n){s(t,e,n)},d(t){t&&l(e)}}}function jo(t){let e;return{c(){e=u("Copy Image")},m(t,n){s(t,e,n)},d(t){t&&l(e)}}}function Zo(t){let e;return{c(){e=u("Please Wait...")},m(t,n){s(t,e,n)},d(t){t&&l(e)}}}function qo(e){let n,i,a,c,u,f,m,w,_,b;function y(t,e){return t[0].capturingImage?Ho:Bo}let v=y(e),E=v(e),x="undefined"!=typeof ClipboardItem&&function(t){let e,n,r,i;function a(t,e){return t[0].capturingImage?Zo:jo}let o=a(t),c=o(t);return{c(){e=d("button"),c.c(),e.disabled=n=t[0].capturingImage},m(n,a){s(n,e,a),c.m(e,null),r||(i=p(e,"click",t[4]),r=!0)},p(t,r){o!==(o=a(t))&&(c.d(1),c=o(t),c&&(c.c(),c.m(e,null))),1&r&&n!==(n=t[0].capturingImage)&&(e.disabled=n)},d(t){t&&l(e),c.d(),r=!1,i()}}}(e);return{c(){n=d("div"),i=d("button"),i.textContent="Copy Text",a=h(),c=d("button"),E.c(),f=h(),x&&x.c(),m=h(),w=d("button"),w.textContent="Copy Transposes",c.disabled=u=e[0].capturingImage,g(n,"class","flex flex-row gap-1")},m(t,r){s(t,n,r),o(n,i),o(n,a),o(n,c),E.m(c,null),o(n,f),x&&x.m(n,null),o(n,m),o(n,w),_||(b=[p(i,"click",e[2]),p(c,"click",e[3]),p(w,"click",e[5])],_=!0)},p(t,[e]){v!==(v=y(t))&&(E.d(1),E=v(t),E&&(E.c(),E.m(c,null))),1&e&&u!==(u=t[0].capturingImage)&&(c.disabled=u),"undefined"!=typeof ClipboardItem&&x.p(t,e)},i:t,o:t,d(t){t&&l(n),E.d(),x&&x.d(),_=!1,r(b)}}}function Go(t,e,n){let{settings:r}=e,i=N();return t.$$set=t=>{"settings"in t&&n(0,r=t.settings)},[r,i,()=>i("copyText"),()=>i("captureSheetAsImage",{mode:"download"}),()=>i("captureSheetAsImage",{mode:"copy"}),()=>i("copyTransposes")]}class Yo extends et{constructor(t){super(),tt(this,t,Go,qo,a,{settings:0})}}Mn("/*\n! tailwindcss v3.4.3 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n7. Disable tap highlights on iOS\n*/\n\nhtml,\n:host {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n  -webkit-tap-highlight-color: transparent; /* 7 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font-family by default.\n2. Use the user's configured `mono` font-feature-settings by default.\n3. Use the user's configured `mono` font-variation-settings by default.\n4. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace; /* 1 */\n  font-feature-settings: normal; /* 2 */\n  font-variation-settings: normal; /* 3 */\n  font-size: 1em; /* 4 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-feature-settings: inherit; /* 1 */\n  font-variation-settings: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  letter-spacing: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\ninput:where([type='button']),\ninput:where([type='reset']),\ninput:where([type='submit']) {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nReset default styling for dialogs.\n*/\ndialog {\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}.container {\n  width: 100%;\n}@media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}@media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}@media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}@media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}@media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}.absolute {\n  position: absolute;\n}.top-0 {\n  top: 0px;\n}.z-40 {\n  z-index: 40;\n}.z-50 {\n  z-index: 50;\n}.m-1 {\n  margin: 0.25rem;\n}.mx-1 {\n  margin-left: 0.25rem;\n  margin-right: 0.25rem;\n}.mx-2 {\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n}.my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}.mb-2 {\n  margin-bottom: 0.5rem;\n}.mt-3 {\n  margin-top: 0.75rem;\n}.box-border {\n  box-sizing: border-box;\n}.block {\n  display: block;\n}.inline-block {\n  display: inline-block;\n}.flex {\n  display: flex;\n}.inline-flex {\n  display: inline-flex;\n}.hidden {\n  display: none;\n}.h-full {\n  height: 100%;\n}.w-16 {\n  width: 4rem;\n}.w-3\\/4 {\n  width: 75%;\n}.w-32 {\n  width: 8rem;\n}.w-\\[58em\\] {\n  width: 58em;\n}.w-full {\n  width: 100%;\n}.max-w-64 {\n  max-width: 16rem;\n}.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}.cursor-pointer {\n  cursor: pointer;\n}.flex-row {\n  flex-direction: row;\n}.flex-col {\n  flex-direction: column;\n}.flex-wrap {\n  flex-wrap: wrap;\n}.content-center {\n  align-content: center;\n}.items-start {\n  align-items: flex-start;\n}.items-center {\n  align-items: center;\n}.justify-center {\n  justify-content: center;\n}.gap-1 {\n  gap: 0.25rem;\n}.gap-12 {\n  gap: 3rem;\n}.gap-2 {\n  gap: 0.5rem;\n}.gap-4 {\n  gap: 1rem;\n}.gap-6 {\n  gap: 1.5rem;\n}.overflow-hidden {\n  overflow: hidden;\n}.overflow-clip {\n  overflow: clip;\n}.text-ellipsis {\n  text-overflow: ellipsis;\n}.text-nowrap {\n  text-wrap: nowrap;\n}.rounded-lg {\n  border-radius: 0.5rem;\n}.rounded-xl {\n  border-radius: 0.75rem;\n}.border {\n  border-width: 1px;\n}.p-1 {\n  padding: 0.25rem;\n}.p-3 {\n  padding: 0.75rem;\n}.p-4 {\n  padding: 1rem;\n}.text-center {\n  text-align: center;\n}.align-middle {\n  vertical-align: middle;\n}.text-2xl {\n  font-size: 1.5rem;\n  line-height: 2rem;\n}.text-3xl {\n  font-size: 1.875rem;\n  line-height: 2.25rem;\n}.text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}.lowercase {\n  text-transform: lowercase;\n}.italic {\n  font-style: italic;\n}.text-white {\n  --tw-text-opacity: 1;\n  color: rgb(255 255 255 / var(--tw-text-opacity));\n}.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}.transition {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}");const{document:Ko}=Y;function Wo(t,e,n){const r=t.slice();return r[56]=e[n][0],r[57]=e[n][1],r}function Xo(t,e,n){const r=t.slice();return r[60]=e[n],r[61]=e,r[62]=n,r}function Qo(t,e,n){const r=t.slice();return r[63]=e[n],r}function Jo(t){let e,n,r,i,a,f,p,m,w,b,v,E,x,k=t[15],T=[];for(let e=0;e<k.length;e+=1)T[e]=ts(Qo(t,k,e));const A=t=>G(T[t],1,1,(()=>{T[t]=null}));return{c(){e=d("hr"),n=h(),r=d("div"),i=d("p"),i.textContent="Or, continue one of your previous projects:",a=h(),f=d("div");for(let t=0;t<T.length;t+=1)T[t].c();p=h(),m=d("div"),w=u("Used "),b=u(t[5]),v=u(" / 5000 kB\n            "),E=d("span"),E.textContent="ⓘ",g(e,"class","w-[58em]"),y(e,"border","1px solid #a0a0a0"),g(i,"class","text-white text-3xl"),g(f,"class","w-3/4 flex flex-wrap justify-center gap-2 overflow-clip text-ellipsis"),g(r,"class","flex flex-col items-center gap-6"),g(E,"title","The last entry (or multiple) will automatically be dropped if an autosave fails.\nYou can also right-click a saved sheet to manually delete it.\nIndividual sizes are an estimation, the total is correct.")},m(t,l){s(t,e,l),s(t,n,l),s(t,r,l),o(r,i),o(r,a),o(r,f);for(let t=0;t<T.length;t+=1)T[t].m(f,null);s(t,p,l),s(t,m,l),o(m,w),o(m,b),o(m,v),o(m,E),x=!0},p(t,e){if(32817&e[0]){let n;for(k=t[15],n=0;n<k.length;n+=1){const r=Qo(t,k,n);T[n]?(T[n].p(r,e),q(T[n],1)):(T[n]=ts(r),T[n].c(),q(T[n],1),T[n].m(f,null))}for(j(),n=k.length;n<T.length;n+=1)A(n);Z()}(!x||32&e[0])&&_(b,t[5])},i(t){if(!x){for(let t=0;t<k.length;t+=1)q(T[t]);x=!0}},o(t){T=T.filter(Boolean);for(let t=0;t<T.length;t+=1)G(T[t]);x=!1},d(t){t&&l(e),t&&l(n),t&&l(r),c(T,t),t&&l(p),t&&l(m)}}}function ts(t){let e,n;return e=new Vo({props:{piece:t[63]}}),e.$on("load",t[33]),e.$on("refresh",t[34]),{c(){W(e.$$.fragment)},m(t,r){X(e,t,r),n=!0},p(t,n){const r={};32768&n[0]&&(r.piece=t[63]),e.$set(r)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function es(t){let e,n,r,i,a,c,f,m,w;return{c(){e=d("p"),n=u("You are currently editing: "),r=u(t[6]),i=h(),a=d("button"),a.textContent="Import another MIDI file",c=h(),f=d("hr"),g(e,"class","mb-2"),g(f,"class","my-2 mx-1")},m(l,d){s(l,e,d),o(e,n),o(e,r),s(l,i,d),s(l,a,d),s(l,c,d),s(l,f,d),m||(w=p(a,"click",t[36]),m=!0)},p(t,e){64&e[0]&&_(r,t[6])},d(t){t&&l(e),t&&l(i),t&&l(a),t&&l(c),t&&l(f),m=!1,w()}}}function ns(t){let e,n,r=t[10],i=[];for(let e=0;e<r.length;e+=1)i[e]=rs(Xo(t,r,e));const a=t=>G(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=f()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);s(t,e,r),n=!0},p(t,n){if(5120&n[0]){let o;for(r=t[10],o=0;o<r.length;o+=1){const a=Xo(t,r,o);i[o]?(i[o].p(a,n),q(i[o],1)):(i[o]=rs(a),i[o].c(),q(i[o],1),i[o].m(e.parentNode,e))}for(j(),o=r.length;o<i.length;o+=1)a(o);Z()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)q(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)G(i[t]);n=!1},d(t){c(i,t),t&&l(e)}}}function rs(t){let e,n,r;function i(e){t[39](e,t[62])}let a={track:t[60],idx:t[62]+1};return void 0!==t[12][t[62]]&&(a.selected=t[12][t[62]]),e=new Nn({props:a}),M.push((()=>K(e,"selected",i))),{c(){W(e.$$.fragment)},m(t,n){X(e,t,n),r=!0},p(r,i){t=r;const a={};1024&i[0]&&(a.track=t[60]),!n&&4096&i[0]&&(n=!0,a.selected=t[12][t[62]],$((()=>n=!1))),e.$set(a)},i(t){r||(q(e.$$.fragment,t),r=!0)},o(t){G(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function is(t){let e,n,r,i,a,u,f;n=new Yo({props:{settings:t[2]}}),n.$on("captureSheetAsImage",t[42]),n.$on("copyText",t[43]),n.$on("copyTransposes",t[23]);let m=Object.entries(t[3]),w=[];for(let e=0;e<m.length;e+=1)w[e]=as(Wo(t,m,e));const _=t=>G(w[t],1,1,(()=>{w[t]=null}));return{c(){e=d("div"),W(n.$$.fragment),r=h(),i=d("div"),a=d("div");for(let t=0;t<w.length;t+=1)w[t].c();y(a,"width","max-content"),O((()=>t[45].call(a))),y(i,"background","#2D2A32"),y(i,"user-select","none"),g(e,"class","flex flex-col items-start")},m(c,h){s(c,e,h),X(n,e,null),o(e,r),o(e,i),o(i,a);for(let t=0;t<w.length;t+=1)w[t].m(a,null);u=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=d("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=T();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=p(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=p(n.contentWindow,"resize",e)}),o(t,n),()=>{(r||i&&n.contentWindow)&&i(),l(n)}}(a,t[45].bind(a)),t[46](i),f=!0},p(t,e){const r={};if(4&e[0]&&(r.settings=t[2]),n.$set(r),106956812&e[0]){let n;for(m=Object.entries(t[3]),n=0;n<m.length;n+=1){const r=Wo(t,m,n);w[n]?(w[n].p(r,e),q(w[n],1)):(w[n]=as(r),w[n].c(),q(w[n],1),w[n].m(a,null))}for(j(),n=m.length;n<w.length;n+=1)_(n);Z()}},i(t){if(!f){q(n.$$.fragment,t);for(let t=0;t<m.length;t+=1)q(w[t]);f=!0}},o(t){G(n.$$.fragment,t),w=w.filter(Boolean);for(let t=0;t<w.length;t+=1)G(w[t]);f=!1},d(r){r&&l(e),Q(n),c(w,r),u(),t[46](null)}}}function as(t){let e,n;return e=new On({props:{line:t[57],prevLine:t[3]?.[t[56]-1],index:t[56],settings:t[2],comment:t[57].comment,passedNext:t[57].continuation,sameTranspositionAsPrevious:t[26](t[56])}}),e.$on("transpose",t[21]),e.$on("auto",t[22]),e.$on("comment",t[25]),e.$on("sheetText",t[44]),{c(){W(e.$$.fragment)},m(t,r){X(e,t,r),n=!0},p(t,n){const r={};8&n[0]&&(r.line=t[57]),8&n[0]&&(r.prevLine=t[3]?.[t[56]-1]),8&n[0]&&(r.index=t[56]),4&n[0]&&(r.settings=t[2]),8&n[0]&&(r.comment=t[57].comment),8&n[0]&&(r.passedNext=t[57].continuation),8&n[0]&&(r.sameTranspositionAsPrevious=t[26](t[56])),e.$set(r)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function os(t){let e,n,i,a,c,u,f,w,_,b,v,E,x,k,T,A,S,N,C,I,z,D,R,U,O,F,L,P=t[15].length>0&&Jo(t),V=t[8]&&es(t);function B(e){t[37](e)}let H={show:t[8],hasMIDI:!!t[9]};void 0!==t[2]&&(H.settings=t[2]),S=new Tn({props:H}),M.push((()=>K(S,"settings",B))),S.$on("auto",t[19]),S.$on("lineBasedAuto",t[38]);let Y=t[10]&&ns(t),J=1==t[8]&&is(t);return{c(){e=h(),n=d("dialog"),n.innerHTML='<form><p class="p-3 text-center">Careful, you&#39;ve previously edited this sheet!\n            <br/>\n            Loading it again will overwrite your progress.</p> \n        <div class="mx-2 mb-2 flex gap-2 w-full justify-center"><button formmethod="dialog" class="p-1" value="load">Load saved</button> \n            <button formmethod="dialog" class="p-1" value="new">Start over</button></div></form>',i=h(),a=d("div"),c=d("div"),u=d("p"),u.textContent="Import a MIDI file to get started:",f=h(),w=d("label"),w.textContent="Click or drop a MIDI file here!",_=h(),b=d("input"),v=h(),P&&P.c(),E=h(),x=d("div"),k=d("div"),T=d("div"),V&&V.c(),A=h(),W(S.$$.fragment),C=h(),I=d("section"),z=d("div"),Y&&Y.c(),D=h(),R=d("button"),R.textContent="Import selected tracks",U=h(),J&&J.c(),Ko.title="MIDI Converter",g(n,"class","rounded-lg overflow-hidden"),g(u,"class","text-white text-3xl"),g(w,"for","drop"),g(w,"class","cursor-pointer rounded-xl text-xl p-4"),y(w,"border","2px solid dimgrey"),g(b,"id","drop"),g(b,"class","hidden"),g(b,"type","file"),g(b,"accept",".mid,.midi"),g(c,"class","flex flex-col items-center gap-6"),g(a,"class","flex flex-col gap-12 w-full h-full items-center align-center justify-center content-center absolute top-0 z-50"),y(a,"height","100%"),y(a,"background","rgb(45,42,50)"),y(a,"background","linear-gradient(45deg, rgba(45,42,50,1) 0%, rgba(50,40,40,1) 50%, rgba(71,57,37,1) 100%)"),y(a,"transition","all 0.6s ease-in-out"),g(k,"class","m-1"),y(k,"min-width","25em"),y(k,"max-width","25em"),g(z,"id","tracks"),g(z,"class","flex flex-col gap-2"),g(I,"id","track-chooser"),g(I,"class","z-40 w-full absolute flex flex-col gap-4 justify-center items-center content-center text-2xl"),y(I,"top","-110vh"),y(I,"height","100vh"),y(I,"background","rgb(45,42,50)"),y(I,"background","linear-gradient(45deg, rgba(45,42,50,1) 0%, rgba(50,40,40,1) 50%, rgba(71,57,37,1) 100%)"),y(I,"transition","all 0.6s ease-in-out"),g(x,"class","flex flex-row")},m(r,l){s(r,e,l),s(r,n,l),t[30](n),s(r,i,l),s(r,a,l),o(a,c),o(c,u),o(c,f),o(c,w),o(c,_),o(c,b),t[32](b),o(a,v),P&&P.m(a,null),t[35](a),s(r,E,l),s(r,x,l),o(x,k),o(k,T),V&&V.m(T,null),o(T,A),X(S,T,null),o(x,C),o(x,I),o(I,z),Y&&Y.m(z,null),o(I,D),o(I,R),t[41](I),o(x,U),J&&J.m(x,null),O=!0,F||(L=[p(n,"close",t[31]),p(w,"drop",m(t[27])),p(w,"dragover",m(t[29])),p(b,"change",t[16]),p(R,"click",t[40])],F=!0)},p(t,e){t[15].length>0?P?(P.p(t,e),32768&e[0]&&q(P,1)):(P=Jo(t),P.c(),q(P,1),P.m(a,null)):P&&(j(),G(P,1,1,(()=>{P=null})),Z()),t[8]?V?V.p(t,e):(V=es(t),V.c(),V.m(T,A)):V&&(V.d(1),V=null);const n={};256&e[0]&&(n.show=t[8]),512&e[0]&&(n.hasMIDI=!!t[9]),!N&&4&e[0]&&(N=!0,n.settings=t[2],$((()=>N=!1))),S.$set(n),t[10]?Y?(Y.p(t,e),1024&e[0]&&q(Y,1)):(Y=ns(t),Y.c(),q(Y,1),Y.m(z,null)):Y&&(j(),G(Y,1,1,(()=>{Y=null})),Z()),1==t[8]?J?(J.p(t,e),256&e[0]&&q(J,1)):(J=is(t),J.c(),q(J,1),J.m(x,null)):J&&(j(),G(J,1,1,(()=>{J=null})),Z())},i(t){O||(q(P),q(S.$$.fragment,t),q(Y),q(J),O=!0)},o(t){G(P),G(S.$$.fragment,t),G(Y),G(J),O=!1},d(o){o&&l(e),o&&l(n),t[30](null),o&&l(i),o&&l(a),t[32](null),P&&P.d(),t[35](null),o&&l(E),o&&l(x),V&&V.d(),Q(S),Y&&Y.d(),t[41](null),J&&J.d(),F=!1,r(L)}}}let ss=.5;function ls(t,e,n){let r,i,a,o,s,l,c,d,u,h={element:void 0,hide:()=>{n(4,h.element.style.top="-110vh",h)},show:()=>{n(4,h.element.style.top="0px",h)}},f=so(),p={element:void 0,name:void 0,data:void 0,set:t=>{n(9,a=void 0),n(0,p.name=t.name,p),n(0,p.data=oo(t.data),p),p.proceed(!0)},proceed:t=>{let e=p.element?.returnValue;t&&(e="load"),e&&("load"==e||"existing"==e?(console.log("Loading",p.name),n(8,w=!0),n(3,S=p.data)):"new"==e&&y(),h.hide())}},m=t=>{if(t)return t.split(".").slice(0,-1).join(".")},g={element:void 0,hide:()=>{n(7,g.element.style.top="-110vh",g)},show:()=>{n(7,g.element.style.top="0px",g)}},w=!1,_=0;async function b(){n(6,r=m(i.files[0].name));let t=D.find((t=>t.name==r))??!1;t?(n(0,p.name=r,p),n(0,p.data=oo(t.data),p),p.element.showModal()):(y(),h.hide())}async function y(t=undefined){t&&n(1,i.files=t.files,i),await i.files[0].arrayBuffer().then((t=>{n(9,a=new an(t)),function(t){return t.header.getTimeDivision()===an.Header.TICKS_PER_BEAT?{ticksPerBeat:t.header.getTicksPerBeat()}:{SMPTEFrames:t.header.getSMPTEFrames(),ticksPerFrame:t.header.getTicksPerFrame()}}(a).ticksPerBeat||console.error("No ticksPerBeat in this midi file"),n(10,o=a.tracks),n(12,c=o.map((()=>!0))),n(8,w=!1),g.show(),_=0}))}function v(t){if(!t)return!1;let e=t.tempo/1e3*x.beats,n=t.playTime-_;return n+ss>=e?(_+=n,!0):void 0}let E,x,k=()=>{let t=function(t,e){let n=[];return t.getEvents().forEach((t=>{t.subtype==We.EVENT_META_SET_TEMPO&&n.push(t),t.subtype==We.EVENT_MIDI_NOTE_ON&&(t.track||!0!==e[0]?!0===e[t.track]&&n.push(t):n.push(t))})),n}(a,c);s=function(t,e){let n,r=e.quantize,i=e.pShifts,a=e.pOors,o=e.classicChordOrder,s=e.sequentialQuantize,l=e.bpm,c=[],d=[],u=!1,h=l,f=4166.66*l;t.forEach((t=>{if(81==t.subtype&&(e=t).tempo&&e.tempoBPM&&0!==e.tempo&&0!==e.tempoBPM)return u=!0,f=t.tempo,void(h=t.tempoBPM);var e;const l=t.param1,p=t.playTime,m=t.delta;if(null==n&&(n=p),Math.abs(p-n)<r)d.push(new sn(l,p,f,h,m,i,a)),n=p;else{if(0==d.length)return void(n=p);c.push(new ln(d,o,s)),d=[],d.push(new sn(l,p,f,h,m,i,a)),n=p}})),c.push(new ln(d,o));let p=new cn(c);return u||console.log(`No tempo found in sheet, set to ${h}/${f}`),p.missingTempo=!u,p}(t,x),n(2,x.missingTempo=s.missingTempo,x)},T=()=>{if(n(8,w=!1),!s)return;const t=s.chords;_=0,n(3,S=[]);let e=[];for(let n=0;n<=t.length;n++){const r={chord:t[n]};r.note=r.chord?.notes[0];const i={chord:t[n+1]};i.note=i.chord?.notes[0],r.note&&r.chord&&(v(r.note)&&e.length>0&&(S.push({chords:e,transposition:x.transposition,continuation:r.note}),e=[]),e.push(r.chord))}S.push({chords:e,transposition:0,continuation:void 0}),n(8,w=!0),n(3,S),n(28,E),n(2,x),n(18,T),n(17,k)},A=(t=0)=>{let e=fn(S[t].originalSheet,11,0,!0);for(let n=t;n<=S.length;n++){const t=S[n];if(!t)continue;const r=fn(t.originalSheet,8,e,!1,x.lbauto_atleast,e);N(n,r),e=r}n(3,S),n(28,E),n(2,x),n(18,T),n(17,k),R()},S=[];function N(t,e){let r=+t;n(3,S[r].transposition=e,S),S[r-1]&&n(3,S[r].difference=S[r].transposition-S[r-1].transposition,S),S[r+1]&&n(3,S[r+1].difference=S[r+1].transposition-S[r].transposition,S)}let I=()=>S.reduce(((t,e,n)=>{let r=(t=>{for(t-=1;t>=0;){if(!S[t]?.comment)return S[t].transposition;t-=1}return!1})(n);return e.comment||0!==n&&r===e.transposition||t.push(-e.transposition),t}),[]);function z(t){n(2,x.capturingImage=!0,x),setTimeout((()=>function(t,e){return ft(this,null,(function*(){const n=yield pe(t,e),{log:r,type:i,quality:a,dpi:o}=n,s=yield je(n);r.time("canvas to blob");const l=yield ie(s,i,a);if(["image/png","image/jpeg"].includes(i)&&o){const t=yield se(l.slice(0,33));let e=new Uint8Array(t);return"image/png"===i?e=yt(e,o):"image/jpeg"===i&&(e=function(t,e){return t[13]=1,t[14]=e>>8,t[15]=255&e,t[16]=e>>8,t[17]=255&e,t}(e,o)),r.timeEnd("canvas to blob"),new Blob([e,l.slice(33)],{type:i})}return r.timeEnd("canvas to blob"),l}))}(d,{width:u,scale:2}).then((e=>{"copy"===t?function(t){try{navigator.clipboard.write([new ClipboardItem({"image/png":t})])}catch(t){console.error(t)}}(e):function(t){const e=URL.createObjectURL(t);let n=r+".png",i=document.createElement("a");i.href=e,i.download=n,document.body.appendChild(i),i.click(),URL.revokeObjectURL(e),document.body.removeChild(i)}(e),n(2,x.capturingImage=!1,x)}))),250)}let D=lo.getAll();function R(){r&&lo.add(r,x,S).then((()=>n(15,D=lo.getAll()))),n(5,f=so())}return t.$$.update=()=>{if(3&t.$$.dirty[0]&&i&&n(6,r=m(i.files[0]?.name)??p.name),268435468&t.$$.dirty[0])if(E){if(E.transposition!=x.transposition){for(let t of S)t.transposition=x.transposition;n(3,S),n(28,E),n(2,x),n(18,T),n(17,k)}else E.beats!=x.beats||E.classicChordOrder!=x.classicChordOrder?(T(),n(3,S),n(28,E),n(2,x),n(18,T),n(17,k)):E.quantize!=x.quantize||E.sequentialQuantize!=x.sequentialQuantize?(k(),T(),n(3,S),n(28,E),n(2,x),n(18,T),n(17,k)):E.bpm!=x.bpm&&(k(),T());n(11,l=""),n(28,E={...x})}else n(28,E={...x})},[p,i,x,S,h,f,r,g,w,a,o,l,c,d,u,D,b,k,T,()=>{n(2,x.transposition=fn(s,11),x),console.log(fn(s,11));for(let t=0;t<S.length;t++)N(t,x.transposition);R()},A,t=>{const e=t.detail.index,n=t.detail.by;setTimeout((()=>{N(e,S[e].transposition+n),R()}),0)},t=>{const e=t.detail.keepGoing,n=t.detail.index;N(n,fn(t.detail.sheet,11,S[n-1]?.transposition??0,0,0)),e&&A(n),R()},()=>{let t=I();navigator.clipboard.writeText(t.join(" "))},z,function(t){const e=t.detail.index,r=t.detail.action,i=t.detail.comment;switch(r){case"add":setTimeout((()=>{S[e-1]?.comment||(S.splice(e,0,{comment:"Add a comment..."}),n(3,S),n(28,E),n(2,x),n(18,T),n(17,k))}),0);break;case"remove":S.splice(e,1),n(3,S),n(28,E),n(2,x),n(18,T),n(17,k);break;case"update":n(3,S[e].comment=i,S)}R()},function(t){const e=S[t];for(let n=t-1;n>=0;n--){const t=S[n];if(!t.comment)return t.transposition==e.transposition}},function(t){t.preventDefault();let e=t?.dataTransfer?.items?.[0];e&&e.getAsFile?(y(t.dataTransfer),b()):console.error("bad file dropped")},E,function(e){C.call(this,t,e)},function(t){M[t?"unshift":"push"]((()=>{p.element=t,n(0,p)}))},()=>{p.proceed()},function(t){M[t?"unshift":"push"]((()=>{i=t,n(1,i)}))},t=>{p.set(t.detail.project),h.hide()},()=>{n(15,D=lo.getAll()),n(5,f=so())},function(t){M[t?"unshift":"push"]((()=>{h.element=t,n(4,h)}))},()=>{h.show(),setTimeout((()=>{n(8,w=!1)}),600)},function(t){x=t,n(2,x)},()=>{A()},function(e,r){t.$$.not_equal(c[r],e)&&(c[r]=e,n(12,c))},()=>{k(),T(),g.hide()},function(t){M[t?"unshift":"push"]((()=>{g.element=t,n(7,g)}))},t=>{z(t.detail.mode)},()=>{n(2,x.tempoMarks=!0,x),setTimeout((()=>{navigator.clipboard.writeText(l)}),0)},t=>n(11,l+=t.detail+"\n"),function(){u=this.clientWidth,n(14,u)},function(t){M[t?"unshift":"push"]((()=>{d=t,n(13,d)}))}]}return new class extends et{constructor(t){super(),tt(this,t,ls,os,a,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
